"use strict";(self.webpackChunkITCommunity_new=self.webpackChunkITCommunity_new||[]).push([[29],{3029:(Y,h,i)=>{i.r(h),i.d(h,{QuestionsModule:()=>B});var u=i(8692),l=i(4032),t=i(4537);let O=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-questions"]],decls:1,vars:0,template:function(n,e){1&n&&t._UZ(0,"router-outlet")},dependencies:[l.lC]}),o})();var f=i(5436),c=i(92),v=i(9730),C=i(9549),_=i(3309),d=i(7084),x=i(8659),y=i(3331),Z=i(9665),b=i(9638),m=i(3556),T=i(6707);function M(o,r){if(1&o){const n=t.EpF();t.TgZ(0,"mat-chip-row",23),t.NdJ("removed",function(){const a=t.CHM(n).$implicit,p=t.oxw();return t.KtG(p.remove(a))})("edited",function(s){const p=t.CHM(n).$implicit,g=t.oxw();return t.KtG(g.edit(p,s))}),t._uU(1),t.TgZ(2,"button",24)(3,"mat-icon"),t._uU(4,"cancel"),t.qZA()()()}if(2&o){const n=r.$implicit;t.Q6J("editable",!0)("aria-description","press enter to edit "+n.name),t.xp6(1),t.hij(" ",n.name," "),t.xp6(1),t.uIk("aria-label","remove "+n.name)}}let q=(()=>{class o{constructor(n,e,s){this.questionAnswerService=n,this.notifyService=e,this.activatedRoute=s,this.isUpdate=!1,this.addOnBlur=!0,this.separatorKeysCodes=[f.K5,f.OC],this.tags=[],this.contentRichText="",this.readonly=!0,this.placeholder="Markdown syntax is supported. Click ? for Help \n\n  To next line, using HTML <br> tag or Enter Twice \n\n  Click \u201cNext\u201d \u{1f441}\ufe0f to preview mode \n\n  Click icon \u201cCode\u201d \u{1f4bb} to embed code your posts \n\n  CLick icon \u201cImage\u201d \u{1f4f7} to upload image \n\n  Please hover to any icon for show tooltip. Give me any feedback if any. \n"}ngOnInit(){this.initPostsForm(),this.activatedRoute.params.subscribe(n=>{this.questionId=n.id,this.questionId&&this.questionAnswerService.getQuestionsById(this.questionId).subscribe(e=>{this.question=e,console.log(e),this.questionForm.patchValue({title:e.title,status:e.status}),this.tags=e.keywords.map(s=>JSON.parse(s)),this.contentRichText=e.content,this.isUpdate=!0})})}initPostsForm(){this.questionForm=new c.cw({title:new c.NI("",[c.kI.required,c.kI.maxLength(255)]),status:new c.NI("")})}add(n){const e=(n.value||"").trim();e&&this.tags.push({name:e}),n.chipInput.clear()}remove(n){const e=this.tags.indexOf(n);e>=0&&this.tags.splice(e,1)}edit(n,e){const s=e.value.trim();if(!s)return void this.remove(n);const a=this.tags.indexOf(n);a>=0&&(this.tags[a].name=s)}onchange(n){this.contentRichText=n,this.contentRichText=this.contentRichText.replace(/<code/g,'<code class="hljs"')}submit(){const n={title:this.questionForm.value.title,content:this.contentRichText,keywords:this.tags};console.log(n),this.isUpdate?this.questionAnswerService.updateQuestion(this.questionId,n).subscribe(e=>{this.clearData(),this.notifyService.success("Update question successfully!","Success")},e=>{this.notifyService.error("Update question failed!","Error")}):this.questionAnswerService.createQuestion(n).subscribe(e=>{this.clearData(),this.notifyService.success("Create question successfully!","Success")},e=>{this.notifyService.error("Create question failed!","Error")})}clearData(){this.questionForm.reset(),this.tags=[],this.contentRichText=""}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(v.t),t.Y36(C.c),t.Y36(l.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-create-question"]],decls:37,vars:12,consts:[[1,"question-outer","container","mt-5"],[1,"mt-2","mx-0","mx-md-5",3,"formGroup"],[1,"form-group","mt-1","col-12"],[1,"col-12","d-flex"],["matInput","","formControlName","title",1,"input-custom","me-3",3,"placeholder"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"custom-button-thumbnail","d-flex","align-items-center"],[1,"mb-1","me-2"],[1,"fa-solid","fa-angle-down","my-auto"],[1,"dropdown-menu","pt-0"],[1,"popover-series-option","p-3"],[1,"radio-group-label"],["aria-labelledby","radio-group-label","formControlName","status",1,"radio-group"],["value","PUBLISH",1,"radio-button"],[1,"sub-title","mx-1"],["mat-stroked-button","","color","primary",3,"click"],[1,"form-group","col-12","mt-2","chip-list"],["appearance","fill",1,"width-1","w-100"],["aria-label","Enter tags"],["chipGrid",""],[3,"editable","aria-description","removed","edited",4,"ngFor","ngForOf"],["placeholder","Tag your post. Maximum 5 tags. At least 1 tag!",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[3,"readonly","contentRichText","placeholder","changeInput"],[3,"editable","aria-description","removed","edited"],["matChipRemove",""]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0)(1,"form",1)(2,"div")(3,"h1"),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"div",2)(7,"div",3),t._UZ(8,"input",4),t.TgZ(9,"div",5)(10,"button",6)(11,"span",7),t._uU(12,"Save"),t.qZA(),t._UZ(13,"i",8),t.qZA(),t.TgZ(14,"ul",9)(15,"div",10)(16,"h3"),t._uU(17,"Publish your series"),t.qZA(),t.TgZ(18,"div")(19,"label",11),t._uU(20,"Visibility:"),t.qZA(),t.TgZ(21,"mat-radio-group",12)(22,"mat-radio-button",13),t._uU(23," Public "),t.qZA()(),t.TgZ(24,"p",14),t._uU(25,"\u{1f441}\ufe0f Ch\u1ec9 nh\u1eefng ng\u01b0\u1eddi c\xf3 li\xean k\u1ebft \u0111\u1ebfn series n\xe0y, m\u1edbi c\xf3 th\u1ec3 xem \u0111\u01b0\u1ee3c"),t.qZA(),t.TgZ(26,"button",15),t.NdJ("click",function(){return e.submit()}),t._uU(27,"Save"),t.qZA()()()()()(),t.TgZ(28,"div")(29,"div",16)(30,"mat-form-field",17)(31,"mat-chip-grid",18,19),t.YNc(33,M,5,4,"mat-chip-row",20),t.TgZ(34,"input",21),t.NdJ("matChipInputTokenEnd",function(a){return e.add(a)}),t.qZA()()()()()(),t.TgZ(35,"div")(36,"app-my-ck-editor",22),t.NdJ("changeInput",function(a){return e.onchange(a)}),t.qZA()()()()),2&n){const s=t.MAs(32);t.xp6(1),t.Q6J("formGroup",e.questionForm),t.xp6(3),t.hij(" ",t.lcZ(5,10,"CREATE_QUESTION")," "),t.xp6(4),t.Q6J("placeholder","Enter Title Text (not required)"),t.xp6(25),t.Q6J("ngForOf",e.tags),t.xp6(1),t.Q6J("matChipInputFor",s)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",e.addOnBlur),t.xp6(2),t.Q6J("readonly",e.readonly)("contentRichText",e.contentRichText)("placeholder",e.placeholder)}},dependencies:[u.sg,c._Y,c.Fj,c.JJ,c.JL,_.n,c.sg,c.u,d.RA,d.oH,d.qH,d.z3,x.KE,y.Hw,Z.Nt,b.lW,m.VQ,m.U0,T.X$],styles:[".chip-list[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{background-color:#fff!important;border-bottom:none!important;border:1px solid #9E9E9E;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.chip-list[_ngcontent-%COMP%]     .mat-mdc-form-field-focus-overlay{background-color:#fff!important}.question-outer[_ngcontent-%COMP%]     .ck-editor__editable_inline{min-height:500px}a[_ngcontent-%COMP%]{text-decoration:none}.example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0;align-items:flex-start}.example-radio-button[_ngcontent-%COMP%]{margin:5px}.custom-counter[_ngcontent-%COMP%]{margin:0;padding:0;list-style-type:none}.custom-counter[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{counter-increment:step-counter;margin-bottom:5px}.custom-counter[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:counter(step-counter);margin-right:10px;font-size:80%;background-color:#b4b4b4;color:#fff;font-weight:700;padding:3px 6px;border-radius:50%}  .mat-mdc-text-field-wrapper{border:1px solid #ccc!important;border-radius:0!important}  .mdc-line-ripple{border:1px solid #ccc!important}.custom-button-thumbnail[_ngcontent-%COMP%]{color:var(--gray-text);border:none;padding:5px 30px;font-weight:400;cursor:pointer;transition:all .3s ease;margin-bottom:10px;background-color:transparent;border:1px solid #ccc;height:45px}.popover-posts-option[_ngcontent-%COMP%], .popover-series-option[_ngcontent-%COMP%]{width:280px}.radio-group-label[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:10px 0;align-items:flex-start}.sub-title[_ngcontent-%COMP%]{font-size:13px;font-weight:400;color:var(--gray-text);margin-bottom:5px}"]}),o})();var w=i(921),P=i(8349),Q=i(6956),A=i(1067),U=i(2005),S=i(3714),I=i(4559);function F(o,r){if(1&o&&(t.TgZ(0,"li")(1,"a",30),t._UZ(2,"i",31),t.TgZ(3,"span"),t._uU(4,"Edit question"),t.qZA()()()),2&o){const n=t.oxw();t.xp6(1),t.MGl("routerLink","/questions/",null==n.question?null:n.question.id,"/edit")}}function E(o,r){if(1&o){const n=t.EpF();t.TgZ(0,"li")(1,"a",32),t.NdJ("click",function(){t.CHM(n);const s=t.oxw();return t.KtG(s.deletequestion(s.question))}),t._UZ(2,"i",33),t.TgZ(3,"span"),t._uU(4,"Delete question"),t.qZA()()()}}function k(o,r){1&o&&(t.TgZ(0,"li")(1,"a",34),t._UZ(2,"i",35),t.TgZ(3,"span"),t._uU(4,"Report"),t.qZA()()())}function J(o,r){if(1&o&&(t.TgZ(0,"div",36)(1,"a",37)(2,"span"),t._uU(3),t.qZA()()()),2&o){const n=r.$implicit,e=t.oxw();t.xp6(3),t.Oqu(e.parseObject(n))}}const D=[{path:"",component:O,children:[{path:"",redirectTo:"unanswered",pathMatch:"full"},{path:"create",component:q},{path:":id",component:(()=>{class o{constructor(n,e,s,a,p,g,L){this.activatedRoute=n,this.questionAnswerService=e,this.loadingServiceService=s,this.localStorageHelperService=a,this.modalService=p,this.notifyService=g,this.router=L,this.userLocal=this.localStorageHelperService.getUser()}ngOnInit(){this.activatedRoute.params.subscribe(n=>{this.questionId=n?.id}),this.listenService()}listenService(){this.loadingServiceService.showLoading(),this.questionAnswerService.getQuestionsById(this.questionId).subscribe(n=>{this.question=n,this.loadingServiceService.hideLoading()})}parseObject(n){return JSON.parse(n).name}isPermission(){return this.userLocal?.id===this.question?.author?.id}deletequestion(n){const e=this.modalService.open(w.z,{centered:!0,size:"md"});e.componentInstance.action="delete",e.componentInstance.title="Delete This question",e.componentInstance.content="Are you sure you want to delete this question?",e.result.then(s=>{this.questionAnswerService.deleteQuestion(n?.id).subscribe(a=>{this.router.navigate(["/home/newest/questions"]),this.notifyService.success("Delete question successfully!","Success")},a=>{console.log(a),this.notifyService.error("Delete question failed!","Error")}),history.back()}).catch(s=>{console.log(s)})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(l.gz),t.Y36(v.t),t.Y36(P.H),t.Y36(Q.w),t.Y36(A.FF),t.Y36(C.c),t.Y36(l.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-question-detail"]],decls:47,vars:16,consts:[[1,"mt-5","container","d-flex"],[1,"right-content-question"],[1,"title"],[1,"my-3","d-flex","justify-content-end"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"custom-button-option","d-flex","align-items-center"],[1,"fa-solid","fa-ellipsis"],[1,"dropdown-menu","popover-posts-option","pt-0"],[4,"ngIf"],[1,"tags-group"],["class","tag-name me-1",4,"ngFor","ngForOf"],[1,"mt-2","create-date"],[1,"create-date-item"],[1,"fa-solid","fa-earth-americas"],[1,"group-icon-action","d-flex","mt-1","ms-0","ms-lg-4"],[1,"icon-item","m-0"],[1,"fa-solid","fa-eye"],[1,"icon-item"],[1,"fa-solid","fa-bookmark"],[1,"fa-solid","fa-comment"],[1,"mt-2"],[3,"innerHTML"],[1,"d-flex","align-items-end"],[1,"text-uppercase","title-content","m-0","mt-2"],[1,"title-line","m-0","ms-2"],[1,"mt-5"],[3,"question"],[1,"mt-3","left-side-bar"],["id","sidebar",1,"left-side-bar-item","sticky"],[1,"mx-4"],[1,"dropdown-item","p-3","py-2",3,"routerLink"],[1,"fa-regular","fa-pen-to-square","me-2"],[1,"dropdown-item","p-3","py-2",3,"click"],[1,"fa-duotone","fa-trash","me-2"],[1,"dropdown-item","p-3","py-2"],[1,"fa-regular","fa-flag","me-2"],[1,"tag-name","me-1"],["href","#"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),t._uU(4),t.qZA()(),t.TgZ(5,"div",3)(6,"div",4)(7,"button",5),t._UZ(8,"i",6),t.qZA(),t.TgZ(9,"ul",7),t.YNc(10,F,5,1,"li",8),t.YNc(11,E,5,0,"li",8),t.YNc(12,k,5,0,"li",8),t.qZA()()(),t.TgZ(13,"div",9),t.YNc(14,J,4,1,"div",10),t.qZA(),t.TgZ(15,"div",11)(16,"div",12)(17,"p"),t._UZ(18,"i",13),t._uU(19),t.ALo(20,"date"),t.qZA(),t.TgZ(21,"div",14)(22,"div",15),t._UZ(23,"i",16),t.TgZ(24,"span"),t._uU(25),t.qZA()(),t.TgZ(26,"div",17),t._UZ(27,"i",18),t.TgZ(28,"span"),t._uU(29),t.qZA()(),t.TgZ(30,"div",17),t._UZ(31,"i",19),t.TgZ(32,"span"),t._uU(33),t.qZA()()()()(),t.TgZ(34,"div",20),t._UZ(35,"div",21),t.ALo(36,"safeHtml"),t.qZA(),t.TgZ(37,"div",22)(38,"h1",23),t._uU(39,"Answers"),t.qZA(),t._UZ(40,"hr",24),t.qZA(),t.TgZ(41,"div",25),t._UZ(42,"app-comments",26),t.qZA()(),t.TgZ(43,"div",27)(44,"div",28),t._UZ(45,"div",29)(46,"app-sidebar-ask"),t.qZA()()()),2&n&&(t.xp6(4),t.Oqu(null==e.question?null:e.question.title),t.xp6(6),t.Q6J("ngIf",e.isPermission()),t.xp6(1),t.Q6J("ngIf",e.isPermission()),t.xp6(1),t.Q6J("ngIf",!e.isPermission()),t.xp6(2),t.Q6J("ngForOf",null==e.question?null:e.question.keywords),t.xp6(5),t.hij(" Published at ",t.xi3(20,11,null==e.question?null:e.question.created,"medium")," "),t.xp6(6),t.Oqu(null==e.question?null:e.question.viewNumber),t.xp6(4),t.Oqu(null==e.question?null:e.question.commentNumber),t.xp6(4),t.Oqu(null==e.question?null:e.question.bookMarkNumber),t.xp6(2),t.Q6J("innerHTML",t.lcZ(36,14,null==e.question?null:e.question.content),t.oJD),t.xp6(7),t.Q6J("question",e.question))},dependencies:[u.sg,u.O5,l.rH,U.n,S.C,u.uU,I.z],styles:[".right-content-series[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:500;color:var(--black)}.right-content-series[_ngcontent-%COMP%]   .create-date[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:var(--gray-text);font-weight:400;margin-top:3px}.tag-name[_ngcontent-%COMP%]{font-size:.7rem;font-weight:500;padding:3px 10px;border-radius:5px;background:#f4f4f5;margin-top:10px;width:-moz-fit-content;width:fit-content;border:1px solid #e9e9eb}.tag-name[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--gray-text);text-decoration:none}.group-icon-action[_ngcontent-%COMP%]   .icon-item[_ngcontent-%COMP%]{font-size:.8rem;color:var(--gray-text);margin-left:10px}.group-icon-action[_ngcontent-%COMP%]   .icon-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:3px}.title-line[_ngcontent-%COMP%]{color:var(--gray-text);flex-grow:1}.left-side-bar[_ngcontent-%COMP%]{width:25%}.right-content-question[_ngcontent-%COMP%]{width:75%}.tags-group[_ngcontent-%COMP%], .create-date-item[_ngcontent-%COMP%]{display:flex}@media screen and (max-width: 768px){.left-side-bar[_ngcontent-%COMP%]{display:none}.right-content-series[_ngcontent-%COMP%]{width:100%}.tags-group[_ngcontent-%COMP%]{display:inline-flex;flex-wrap:wrap}.create-date-item[_ngcontent-%COMP%]{display:block}}"]}),o})()},{path:":id/edit",component:q}]}];let N=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[l.Bz.forChild(D),l.Bz]}),o})();var R=i(1581),H=i(707),z=i(9182);let B=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.ez,N,c.u5,R.m,c.UX,T.aw,d.Hi,x.lN,y.Ps,Z.c,b.ot,H.T5,m.Fk,z.B]}),o})()}}]);