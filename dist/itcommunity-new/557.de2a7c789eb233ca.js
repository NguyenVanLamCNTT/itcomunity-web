"use strict";(self.webpackChunkITCommunity_new=self.webpackChunkITCommunity_new||[]).push([[557],{8557:(v,m,n)=>{n.r(m),n.d(m,{AccountModule:()=>S});var f=n(8692),p=n(5518),o=n(92),s=n(5725),d=n(1528),e=n(4537),l=n(6956),C=n(5934),y=n(4899),Z=n(9549),g=n(9638),h=n(3331);function A(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",28)(1,"button",29),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.removeUrlThumbnail())}),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()()()}}const P=[{path:"",component:(()=>{class r{constructor(t,i,a,u){this.localStorageHelperService=t,this.userService=i,this.uploadFileService=a,this.notifyService=u,this.userForm=this.initForm(),this.urlProfile=[],this.isUpload=!1}ngOnInit(){this.listenService()}initForm(){return new o.cw({fullname:new o.NI({value:"",disabled:!1},[o.kI.required]),email:new o.NI({value:"",disabled:!0},[o.kI.required]),gender:new o.NI({value:"",disabled:!0},[o.kI.required]),username:new o.NI({value:"",disabled:!0},[o.kI.required]),age:new o.NI({value:"",disabled:!0},[o.kI.required]),about:new o.NI({value:"",disabled:!1},[o.kI.required])})}listenService(){this.user=this.localStorageHelperService.getUser(),this.user&&this.pathValue(this.user)}pathValue(t){this.urlProfile=t.avatar,this.userForm.patchValue({fullname:t.fullName,email:t.email,gender:t.gender,username:t.username,age:t.age,about:t.about})}detectFileThumbnail(t){if(this.fileProfile=t.target.files||t.dataTransfer.files,this.fileProfile.length<7)for(let i of this.fileProfile){let a=new FileReader;a.onload=u=>{this.urlProfile=u.target.result,this.isUpload=!0},a.readAsDataURL(i)}}removeUrlThumbnail(){this.urlProfile=this.user?.avatar,this.isUpload=!1}submit(){const t=new s.n;if(t.fullName=this.userForm.value.fullname,t.about=this.userForm.value.about,t.avatar=this.urlProfile,t.age=this.userForm.value.age,this.fileProfile&&this.fileProfile[0]){const i=new FormData;i.append("upload",this.fileProfile[0]),this.uploadFileService.uploadFile(i).pipe((0,d.w)(a=>(t.avatar=a,this.userService.updateMe(t))),(0,d.w)(a=>this.userService.getMe())).subscribe(a=>{this.localStorageHelperService.addUser(a),this.listenService(),this.notifyService.success("Update profile successfully!","Success")},a=>{this.notifyService.error("Update profile fail please check again!","Error")})}else this.userService.updateMe(t).pipe((0,d.w)(i=>this.userService.getMe())).subscribe(i=>{this.localStorageHelperService.addUser(i),this.listenService(),this.notifyService.success("Update profile successfully!","Success")},i=>{this.notifyService.error("Update profile fail please check again!","Error")})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(l.w),e.Y36(C.K),e.Y36(y.f),e.Y36(Z.c))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-account"]],decls:54,vars:4,consts:[[1,"profile-info","mt-5","container","shadow","accordion-button","d-flex","justify-content-center","align-items-center"],[1,"profile-info-group","p-4","w-100"],[1,"avatar","d-flex","justify-content-center","align-items-center",3,"files"],["width","200","height","200px",1,"rounded",3,"src","alt"],["for","upload"],[1,"fa-sharp","fa-regular","fa-image"],["type","file","id","upload",1,"uploadImgae","d-none",3,"change"],["class","d-flex justify-content-center mt-1",4,"ngIf"],[1,"mt-4"],[3,"formGroup"],[1,"form-group"],["for","name"],[1,"text-danger"],["type","text","formControlName","fullname","id","name","placeholder","Enter fullname",1,"form-control"],[1,"d-flex","col-12"],[1,"form-group","col-6"],["for","username"],["type","text","formControlName","username","id","username","placeholder","Enter username",1,"form-control","me-1"],["for","email"],["type","email","formControlName","email","id","email","placeholder","Enter email",1,"form-control","ms-1"],["for","password"],["type","text","formControlName","age","id","password","placeholder","Enter Age",1,"form-control","me-1"],["for","confirmPassword"],["type","text","formControlName","gender","id","confirmPassword","placeholder","Enter Gender",1,"form-control","ms-1"],["type","text","formControlName","about","id","confirmPassword","placeholder","Please write about here !",1,"form-control"],[1,"mt-3","d-flex","justify-content-end"],["mat-stroked-button","","color","primary",1,"me-2"],["mat-raised-button","","color","primary",3,"click"],[1,"d-flex","justify-content-center","mt-1"],["mat-mini-fab","","color","warn",1,"absolute","justify-self-center","my-fab",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),e._uU(4," Account Settings "),e.qZA()(),e.TgZ(5,"div",2),e.NdJ("files",function(u){return i.detectFileThumbnail(u)}),e._UZ(6,"img",3),e.TgZ(7,"label",4),e._UZ(8,"i",5),e.qZA(),e.TgZ(9,"input",6),e.NdJ("change",function(u){return i.detectFileThumbnail(u)}),e.qZA()(),e.YNc(10,A,4,0,"div",7),e.TgZ(11,"div",8)(12,"form",9)(13,"div",10)(14,"label",11),e._uU(15,"Fullname "),e.TgZ(16,"span",12),e._uU(17,"(*)"),e.qZA()(),e._UZ(18,"input",13),e.qZA(),e.TgZ(19,"div",14)(20,"div",15)(21,"label",16),e._uU(22,"Username "),e.TgZ(23,"span",12),e._uU(24,"(*)"),e.qZA()(),e._UZ(25,"input",17),e.qZA(),e.TgZ(26,"div",15)(27,"label",18),e._uU(28,"Email "),e.TgZ(29,"span",12),e._uU(30,"(*)"),e.qZA()(),e._UZ(31,"input",19),e.qZA()(),e.TgZ(32,"div",14)(33,"div",15)(34,"label",20),e._uU(35,"Age "),e.TgZ(36,"span",12),e._uU(37,"(*)"),e.qZA()(),e._UZ(38,"input",21),e.qZA(),e.TgZ(39,"div",15)(40,"label",22),e._uU(41,"Gender "),e.TgZ(42,"span",12),e._uU(43,"(*)"),e.qZA()(),e._UZ(44,"input",23),e.qZA()(),e.TgZ(45,"div",10)(46,"label",22),e._uU(47,"About"),e.qZA(),e._UZ(48,"textarea",24),e.qZA(),e.TgZ(49,"div",25)(50,"button",26),e._uU(51,"Cancel"),e.qZA(),e.TgZ(52,"button",27),e.NdJ("click",function(){return i.submit()}),e._uU(53,"Submit"),e.qZA()()()()()()),2&t&&(e.xp6(6),e.s9C("src",i.urlProfile,e.LSH),e.s9C("alt",i.urlProfile),e.xp6(4),e.Q6J("ngIf",i.isUpload),e.xp6(2),e.Q6J("formGroup",i.userForm))},dependencies:[f.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,g.lW,g.nh,h.Hw],styles:[".profile-info[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-top:10px}.profile-info[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--gray-text)}.profile-info[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-top:10px}.profile-info[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:150px;margin-top:10px}.profile-info-group[_ngcontent-%COMP%]{border:1px solid var(--gray-light)}.avatar[_ngcontent-%COMP%]{position:relative}.avatar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute!important;display:none}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover + label[_ngcontent-%COMP%]{display:block}.fa-image[_ngcontent-%COMP%]{font-size:3.5rem;opacity:.8}.rounded[_ngcontent-%COMP%]{border-radius:50%!important}.fa-trash[_ngcontent-%COMP%]{font-size:1.5rem;opacity:.8;color:var(--red)}"]}),r})()}];let U=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[p.Bz.forChild(P),p.Bz]}),r})();var b=n(9182),M=n(4910);let S=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[f.ez,U,b.B,M.aw,o.UX,g.ot,h.Ps]}),r})()},9549:(v,m,n)=>{n.d(m,{c:()=>o});var f=n(4537),p=n(8292);let o=(()=>{class s{constructor(e){this.toastr=e}success(e,l="Successfully"){this.toastr.success(e,l)}error(e,l="Error"){this.toastr.error(e,l)}warning(e,l="Warning"){this.toastr.warning(e,l)}info(e,l="Info"){this.toastr.info(e,l)}}return s.\u0275fac=function(e){return new(e||s)(f.LFG(p._W))},s.\u0275prov=f.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()}}]);