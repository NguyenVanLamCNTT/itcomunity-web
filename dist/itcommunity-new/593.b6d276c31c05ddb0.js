"use strict";(self.webpackChunkITCommunity_new=self.webpackChunkITCommunity_new||[]).push([[593],{8593:(L,d,a)=>{a.r(d),a.d(d,{AuthModule:()=>U});var l=a(6956),s=a(1901),b=a(8692),t=a(92),c=a(1528),e=a(4537),g=a(4910),f=a(5934),m=a(4199),h=a(9638);let v=(()=>{class r{constructor(n,i,o,p,q){this.translateService=n,this.authService=i,this.localStorageHelperService=o,this.userService=p,this.router=q,this.formOTP=this.initFormOTP()}ngOnInit(){const n=this.translateService.currentLang;console.log(n),this.translateService.use(n||"vi")}initFormOTP(){return new t.cw({number1:new t.NI("",[t.kI.required,t.kI.minLength(1),t.kI.maxLength(1)]),number2:new t.NI("",[t.kI.required,t.kI.minLength(1),t.kI.maxLength(1)]),number3:new t.NI("",[t.kI.required,t.kI.minLength(1),t.kI.maxLength(1)]),number4:new t.NI("",[t.kI.required,t.kI.minLength(1),t.kI.maxLength(1)]),number5:new t.NI("",[t.kI.required,t.kI.minLength(1),t.kI.maxLength(1)]),number6:new t.NI("",[t.kI.required,t.kI.minLength(1),t.kI.maxLength(1)])})}nextValue(n){switch(console.log(n),n){case"number1":""!==this.formOTP.getRawValue().number1&&document.getElementById("number2")?.focus();break;case"number2":""!==this.formOTP.getRawValue().number2?document.getElementById("number3")?.focus():document.getElementById("number1")?.focus();break;case"number3":""!==this.formOTP.getRawValue().number3?document.getElementById("number4")?.focus():document.getElementById("number2")?.focus();break;case"number4":""!==this.formOTP.getRawValue().number4?document.getElementById("number5")?.focus():document.getElementById("number3")?.focus();break;case"number5":""!==this.formOTP.getRawValue().number5?document.getElementById("number6")?.focus():document.getElementById("number4")?.focus();break;case"number6":""!==this.formOTP.getRawValue().number6?this.submit():document.getElementById("number5")?.focus()}}submit(){const n=this.formOTP.getRawValue().number1+this.formOTP.getRawValue().number2+this.formOTP.getRawValue().number3+this.formOTP.getRawValue().number4+this.formOTP.getRawValue().number5+this.formOTP.getRawValue().number6,i=this.localStorageHelperService.getUser();this.authService.verifyOTP(i.email,parseInt(n)).pipe((0,c.w)(o=>(console.log("OTP res",o),this.authService.login(i,!0))),(0,c.w)(o=>(console.log("Login res",o),this.localStorageHelperService.saveToken(o.accessToken.toString()),this.localStorageHelperService.saveRefreshToken(o.refreshToken.toString()),this.localStorageHelperService.saveIsVerify(o.isConfirmEmail),this.userService.getMe()))).subscribe(o=>{console.log("Get me res",o),this.localStorageHelperService.addUser(o),this.router.navigate(["/home/newest"])})}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(g.sK),e.Y36(s.e),e.Y36(l.w),e.Y36(f.K),e.Y36(m.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-validate-email"]],decls:25,vars:13,consts:[[1,"p-5","container-lg"],[1,"p-5","text-center"],[1,"d-flex","justify-content-center","mt-4"],["src","assets/images/logo-header-250x250.png","alt","","width","200"],[1,"text-secondary","mx-5","my-4"],[1,"d-flex","justify-content-center","mt-4",3,"formGroup"],["type","text","name","","id","number1","maxlength","1","formControlName","number1",1,"input-otp-item",3,"keyup"],["type","text","name","","id","number2","maxlength","1","formControlName","number2",1,"input-otp-item",3,"keyup"],["type","text","name","","id","number3","maxlength","1","formControlName","number3",1,"input-otp-item",3,"keyup"],["type","text","name","","id","number4","maxlength","1","formControlName","number4",1,"input-otp-item",3,"keyup"],["type","text","name","","id","number5","maxlength","1","formControlName","number5",1,"input-otp-item",3,"keyup"],["type","text","name","","id","number6","maxlength","1","formControlName","number6",1,"input-otp-item",3,"keyup"],[1,"mt-3"],[1,"my-2"],["mat-raised-button","","color","primary"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"h1"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"p",4),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"form",5)(11,"input",6),e.NdJ("keyup",function(){return i.nextValue("number1")}),e.qZA(),e.TgZ(12,"input",7),e.NdJ("keyup",function(){return i.nextValue("number2")}),e.qZA(),e.TgZ(13,"input",8),e.NdJ("keyup",function(){return i.nextValue("number3")}),e.qZA(),e.TgZ(14,"input",9),e.NdJ("keyup",function(){return i.nextValue("number4")}),e.qZA(),e.TgZ(15,"input",10),e.NdJ("keyup",function(){return i.nextValue("number5")}),e.qZA(),e.TgZ(16,"input",11),e.NdJ("keyup",function(){return i.nextValue("number6")}),e.qZA()(),e.TgZ(17,"div",12)(18,"i"),e._uU(19),e.ALo(20,"translate"),e.qZA()(),e.TgZ(21,"div",13)(22,"button",14),e._uU(23),e.ALo(24,"translate"),e.qZA()()()()),2&n&&(e.xp6(5),e.Oqu(e.lcZ(6,5,"WELCOME")),e.xp6(3),e.hij(" ",e.lcZ(9,7,"VALIDATE_EMAIL_SUB_HEADER")," "),e.xp6(2),e.Q6J("formGroup",i.formOTP),e.xp6(9),e.hij(" ( ",e.lcZ(20,9,"TIME_VERIFY_OTP")," ) "),e.xp6(4),e.Oqu(e.lcZ(24,11,"RESEND_OTP")))},dependencies:[t._Y,t.Fj,t.JJ,t.JL,t.nD,t.sg,t.u,h.lW,g.X$],styles:[".input-otp-item[_ngcontent-%COMP%]{width:40px;height:50px;border:1px solid #000000;border-radius:5px;text-align:center;font-size:20px;font-weight:600;color:#000;margin:0 5px;padding:0;outline:none;-webkit-appearance:none;appearance:none}"]}),r})();var Z=a(4882),T=a(5725);const y=function(){return["/auth/login"]};let k=(()=>{class r{constructor(n,i,o){this.authService=n,this.router=i,this.localStorageHelperService=o,this.infoRegister=this.initFormRegister()}ngOnInit(){}initFormRegister(){return new t.cw({username:new t.NI("",[t.kI.required]),password:new t.NI("",[t.kI.required]),email:new t.NI("",[t.kI.required,t.kI.email]),age:new t.NI("",[t.kI.required]),gender:new t.NI("",[t.kI.required]),fullname:new t.NI("",[t.kI.required])})}register(){console.log("infoRegister",this.infoRegister.value);const n=new T.n;n.username=this.infoRegister.value.username,n.password=this.infoRegister.value.password,n.email=this.infoRegister.value.email,n.age=this.infoRegister.value.age,n.gender=this.infoRegister.value.gender,n.fullname=this.infoRegister.value.fullname,console.log("user",n),this.authService.register(n).pipe((0,Z.z)(i=>(n&&this.localStorageHelperService.addUser(n),this.authService.sendOTP(n.username)))).subscribe(i=>{this.router.navigate(["/auth/validate-email"])})}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(s.e),e.Y36(m.F0),e.Y36(l.w))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-register"]],decls:70,vars:3,consts:[[1,"p-5","bg-image",2,"background-image","url('https://mdbootstrap.com/img/new/textures/full/171.jpg')","height","300px"],[1,"card","mx-4","mx-md-5","shadow-5-strong",2,"margin-top","-160px","background","hsla(0, 0%, 100%, 0.8)","backdrop-filter","blur(30px)"],[1,"card-body","py-5","px-md-5"],[1,"row","d-flex","justify-content-center"],[1,"col-lg-6"],[1,"d-flex","justify-content-center"],["src","../../../../assets/images/logo-header-250x250.png","width","100","alt",""],[1,"text-center"],[1,"fw-bold","mb-5"],[3,"formGroup"],[1,"row"],[1,"col-md-6","mb-4"],[1,"form-outline"],["for","username",1,"form-label"],["type","text","id","username","formControlName","username",1,"form-control"],["for","fullname",1,"form-label"],["type","text","id","fullname","formControlName","fullname",1,"form-control"],["for","gender",1,"form-label"],["name","gender","id","gender","formControlName","gender",1,"form-control"],["value","MALE"],["value","FEMALE"],["value","OTHER"],["type","text","id","fullname","formControlName","age",1,"form-control"],[1,"form-outline","mb-4"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control"],[1,"form-check","d-flex","justify-content-between","mb-4"],["for","form2Example33",1,"form-check-label"],["type","checkbox","value","","id","form2Example33","checked","",1,"form-check-input"],[3,"routerLink"],["type","submit",1,"btn","btn-primary","btn-block","mb-4","w-50",3,"click"],["type","button",1,"btn","btn-link","btn-floating","mx-1"],[1,"fab","fa-facebook-f"],[1,"fab","fa-google"],[1,"fab","fa-twitter"],[1,"fab","fa-github"]],template:function(n,i){1&n&&(e.TgZ(0,"section"),e._UZ(1,"div",0),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e._UZ(7,"img",6),e.qZA(),e.TgZ(8,"div",7)(9,"h2",8),e._uU(10,"\u0110\u0103ng k\xed t\xe0i kho\u1ea3n cho ITCommunity"),e.qZA()(),e.TgZ(11,"form",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"label",13),e._uU(16,"Username"),e.qZA(),e._UZ(17,"input",14),e.qZA()(),e.TgZ(18,"div",11)(19,"div",12)(20,"label",15),e._uU(21,"Fullname"),e.qZA(),e._UZ(22,"input",16),e.qZA()()(),e.TgZ(23,"div",10)(24,"div",11)(25,"div",12)(26,"label",17),e._uU(27,"Gender"),e.qZA(),e.TgZ(28,"select",18)(29,"option",19),e._uU(30,"Male"),e.qZA(),e.TgZ(31,"option",20),e._uU(32,"Female"),e.qZA(),e.TgZ(33,"option",21),e._uU(34,"Other"),e.qZA()()()(),e.TgZ(35,"div",11)(36,"div",12)(37,"label",15),e._uU(38,"Age"),e.qZA(),e._UZ(39,"input",22),e.qZA()()(),e.TgZ(40,"div",23)(41,"label",24),e._uU(42,"Email address"),e.qZA(),e._UZ(43,"input",25),e.qZA(),e.TgZ(44,"div",23)(45,"label",26),e._uU(46,"Password"),e.qZA(),e._UZ(47,"input",27),e.qZA(),e.TgZ(48,"div",28)(49,"div")(50,"label",29),e._uU(51," Subscribe to our newsletter "),e.qZA(),e._UZ(52,"input",30),e.qZA(),e.TgZ(53,"div")(54,"a",31),e._uU(55,"\u0110\u0103ng nh\u1eadp"),e.qZA()()(),e.TgZ(56,"div",5)(57,"button",32),e.NdJ("click",function(){return i.register()}),e._uU(58," Sign up "),e.qZA()(),e.TgZ(59,"div",7)(60,"p"),e._uU(61,"or sign up with:"),e.qZA(),e.TgZ(62,"button",33),e._UZ(63,"i",34),e.qZA(),e.TgZ(64,"button",33),e._UZ(65,"i",35),e.qZA(),e.TgZ(66,"button",33),e._UZ(67,"i",36),e.qZA(),e.TgZ(68,"button",33),e._UZ(69,"i",37),e.qZA()()()()()()()()),2&n&&(e.xp6(11),e.Q6J("formGroup",i.infoRegister),e.xp6(43),e.Q6J("routerLink",e.DdM(2,y)))},dependencies:[m.rH,t._Y,t.YN,t.Kr,t.Fj,t.EJ,t.JJ,t.JL,t.sg,t.u]}),r})(),w=(()=>{class r{constructor(n){this.translateService=n}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(g.sK))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-auth"]],decls:1,vars:0,template:function(n,i){1&n&&e._UZ(0,"router-outlet")},dependencies:[m.lC]}),r})();var A=a(7741),x=a(8168),I=a(4945);const C=function(){return["/auth/register"]},E=[{path:"",component:w,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class r{constructor(n,i,o,p){this.authService=n,this.router=i,this.localStorageHelperService=o,this.userService=p,this.infoLogin=this.initFormLogin()}ngOnInit(){}initFormLogin(){return new t.cw({username:new t.NI("",[t.kI.required]),password:new t.NI("",[t.kI.required])})}onSubmit(){const n={username:this.infoLogin.value.username,password:this.infoLogin.value.password},i=new A.W;this.authService.login(n,!1).pipe((0,x.b)(o=>{this.localStorageHelperService.saveToken(o.accessToken.toString()),this.localStorageHelperService.saveRefreshToken(o.refreshToken.toString()),this.localStorageHelperService.saveIsVerify(o.isConfirmEmail),i.accessToken=o.accessToken,i.refreshToken=o.refreshToken,i.isConfirmEmail=o.isConfirmEmail,i.isConfirmEmail=o.isConfirmEmail,i.isAdmin=o.isAdmin}),(0,c.w)(()=>this.userService.getMe()),(0,c.w)(o=>(console.log("login",o),o.password=n.password,this.localStorageHelperService.addUser(o),this.authService.isLogin(!0),i&&i.isConfirmEmail?(this.router.navigate(["/home/newest"]),(0,I.of)(null)):(this.router.navigate(["/auth/validate-email"]),this.authService.sendOTP(o.username))))).subscribe(o=>{})}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(s.e),e.Y36(m.F0),e.Y36(l.w),e.Y36(f.K))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-login"]],decls:37,vars:3,consts:[[1,"vh-100",2,"background-color","#508bfc"],[3,"formGroup"],[1,"container","py-5","h-100"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-12","col-md-8","col-lg-6","col-xl-5"],[1,"card","shadow-2-strong",2,"border-radius","1rem"],[1,"card-body","p-5"],[1,"d-flex","justify-content-center"],["src","../../../../assets/images/logo-header-250x250.png","width","100","alt",""],[1,"text-center","mt-2"],[1,"mb-5"],[1,"form-outline","mb-4"],["for","typeEmailX-2",1,"form-label"],["type","email","id","typeEmailX-2","formControlName","username",1,"form-control","form-control-lg"],["for","typePasswordX-2",1,"form-label"],["type","password","id","typePasswordX-2","formControlName","password",1,"form-control","form-control-lg"],[1,"form-check","d-flex","justify-content-between","mb-4"],["type","checkbox","value","","id","form1Example3",1,"form-check-input"],["for","form1Example3",1,"form-check-label","ms-2"],[1,"ms-auto","text-main",3,"routerLink"],["type","submit",1,"btn","btn-primary","btn-lg","btn-block","w-100",3,"click"],[1,"my-4"],["type","submit",1,"btn","btn-lg","btn-block","btn-primary","w-100",2,"background-color","#dd4b39"],[1,"fab","fa-google","me-2"],["type","submit",1,"btn","btn-lg","btn-block","btn-primary","mb-2","w-100","mt-3",2,"background-color","#3b5998"],[1,"fab","fa-facebook-f","me-2"]],template:function(n,i){1&n&&(e.TgZ(0,"section",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e._UZ(8,"img",8),e.qZA(),e.TgZ(9,"div",9)(10,"h3",10),e._uU(11,"\u0110\u0103ng nh\u1eadp v\xe0o ITCommunity"),e.qZA()(),e.TgZ(12,"div",11)(13,"label",12),e._uU(14,"Email"),e.qZA(),e._UZ(15,"input",13),e.qZA(),e.TgZ(16,"div",11)(17,"label",14),e._uU(18,"Password"),e.qZA(),e._UZ(19,"input",15),e.qZA(),e.TgZ(20,"div",16)(21,"div"),e._UZ(22,"input",17),e.TgZ(23,"label",18),e._uU(24," Remember password "),e.qZA()(),e.TgZ(25,"div")(26,"a",19),e._uU(27,"T\u1ea1o t\xe0i kho\u1ea3n"),e.qZA()()(),e.TgZ(28,"button",20),e.NdJ("click",function(){return i.onSubmit()}),e._uU(29,"Login"),e.qZA(),e._UZ(30,"hr",21),e.TgZ(31,"button",22),e._UZ(32,"i",23),e._uU(33," Sign in with google"),e.qZA(),e.TgZ(34,"button",24),e._UZ(35,"i",25),e._uU(36,"Sign in with facebook"),e.qZA()()()()()()()()),2&n&&(e.xp6(1),e.Q6J("formGroup",i.infoLogin),e.xp6(25),e.Q6J("routerLink",e.DdM(2,C)))},dependencies:[m.rH,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u],styles:[".gradient-custom-2[_ngcontent-%COMP%]{background:#fccb90;background:linear-gradient(to right,#ee7724,#d8363a,#dd3675,#b44593)}@media (min-width: 768px){.gradient-form[_ngcontent-%COMP%]{height:100vh!important}}@media (min-width: 769px){.gradient-custom-2[_ngcontent-%COMP%]{border-top-right-radius:.3rem;border-bottom-right-radius:.3rem}}.text-main[_ngcontent-%COMP%]{color:var(--main-colors)!important}"]}),r})()},{path:"register",component:k},{path:"validate-email",component:v}]}];let S=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[m.Bz.forChild(E),m.Bz]}),r})(),U=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[s.e,l.w],imports:[b.ez,S,t.UX,g.aw,h.ot]}),r})()}}]);