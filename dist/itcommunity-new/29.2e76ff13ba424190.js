"use strict";(self.webpackChunkITCommunity_new=self.webpackChunkITCommunity_new||[]).push([[29],{3029:(X,f,r)=>{r.r(f),r.d(f,{QuestionsModule:()=>K});var u=r(8692),c=r(4032),t=r(4537);let _=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-questions"]],decls:1,vars:0,template:function(o,e){1&o&&t._UZ(0,"router-outlet")},dependencies:[c.lC]}),n})();var v=r(5436),l=r(92),x=r(9730),C=r(9549),Q=r(3309),d=r(7084),m=r(8659),T=r(3331),y=r(9665),Z=r(9638),g=r(3556),b=r(6707);function w(n,s){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Title is required"),t.qZA())}function A(n,s){if(1&n){const o=t.EpF();t.TgZ(0,"mat-chip-row",24),t.NdJ("removed",function(){const a=t.CHM(o).$implicit,p=t.oxw();return t.KtG(p.remove(a))})("edited",function(i){const p=t.CHM(o).$implicit,h=t.oxw();return t.KtG(h.edit(p,i))}),t._uU(1),t.TgZ(2,"button",25)(3,"mat-icon"),t._uU(4,"cancel"),t.qZA()()()}if(2&n){const o=s.$implicit;t.Q6J("editable",!0)("aria-description","press enter to edit "+o.name),t.xp6(1),t.hij(" ",o.name," "),t.xp6(1),t.uIk("aria-label","remove "+o.name)}}function U(n,s){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Content less than 5 tags "),t.qZA())}function I(n,s){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Content is required "),t.qZA())}let q=(()=>{class n{constructor(o,e,i){this.questionAnswerService=o,this.notifyService=e,this.activatedRoute=i,this.isUpdate=!1,this.addOnBlur=!0,this.separatorKeysCodes=[v.K5,v.OC],this.tags=[],this.contentRichText="",this.readonly=!0,this.placeholder="Markdown syntax is supported. Click ? for Help \n\n  To next line, using HTML <br> tag or Enter Twice \n\n  Click \u201cNext\u201d \u{1f441}\ufe0f to preview mode \n\n  Click icon \u201cCode\u201d \u{1f4bb} to embed code your posts \n\n  CLick icon \u201cImage\u201d \u{1f4f7} to upload image \n\n  Please hover to any icon for show tooltip. Give me any feedback if any. \n"}ngOnInit(){this.initPostsForm(),this.activatedRoute.params.subscribe(o=>{this.questionId=o.id,this.questionId&&this.questionAnswerService.getQuestionsById(this.questionId).subscribe(e=>{this.question=e,console.log(e),this.questionForm.patchValue({title:e.title,status:e.status}),this.tags=e.keywords.map(i=>JSON.parse(i)),this.contentRichText=e.content,this.isUpdate=!0})})}initPostsForm(){this.questionForm=new l.cw({title:new l.NI("",[l.kI.required,l.kI.maxLength(255)]),status:new l.NI("")})}add(o){const e=(o.value||"").trim();e&&this.tags.push({name:e}),o.chipInput.clear()}remove(o){const e=this.tags.indexOf(o);e>=0&&this.tags.splice(e,1)}edit(o,e){const i=e.value.trim();if(!i)return void this.remove(o);const a=this.tags.indexOf(o);a>=0&&(this.tags[a].name=i)}onchange(o){this.contentRichText=o,this.contentRichText=this.contentRichText.replace(/<code/g,'<code class="hljs"')}submit(){const o={title:this.questionForm.value.title,content:this.contentRichText,keywords:this.tags};console.log(o),this.isUpdate?this.questionAnswerService.updateQuestion(this.questionId,o).subscribe(e=>{this.clearData(),this.notifyService.success("Update question successfully!","Success")},e=>{this.notifyService.error("Update question failed!","Error")}):this.questionAnswerService.createQuestion(o).subscribe(e=>{this.clearData(),this.notifyService.success("Create question successfully!","Success")},e=>{this.notifyService.error("Create question failed!","Error")})}clearData(){this.questionForm.reset(),this.tags=[],this.contentRichText=""}isControlValid(o,e){const i=o.controls[e];return i.valid&&(i.dirty||i.touched)}isControlInvalid(o,e){const i=o.controls[e];return i.invalid&&(i.dirty||i.touched)}controlHasError(o,e,i){const a=o.controls[i];return a.hasError(e)&&(a.dirty||a.touched)}isControlTouched(o,e){const i=o.controls[e];return i.dirty||i.touched}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(x.t),t.Y36(C.c),t.Y36(c.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-question"]],decls:40,vars:16,consts:[[1,"question-outer","container","mt-5"],[1,"mt-2","mx-0","mx-md-5",3,"formGroup"],[1,"form-group","mt-1","col-12"],[1,"col-12","d-flex"],["matInput","","formControlName","title",1,"input-custom","me-3",3,"placeholder"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"custom-button-thumbnail","d-flex","align-items-center"],[1,"mb-1","me-2"],[1,"fa-solid","fa-angle-down","my-auto"],[1,"dropdown-menu","pt-0"],[1,"popover-series-option","p-3"],[1,"radio-group-label"],["aria-labelledby","radio-group-label","formControlName","status",1,"radio-group"],["value","PUBLISH",1,"radio-button"],[1,"sub-title","mx-1"],["mat-stroked-button","","color","primary",3,"disabled","click"],[4,"ngIf"],[1,"form-group","col-12","mt-2","chip-list"],["appearance","fill",1,"width-1","w-100"],["aria-label","Enter tags"],["chipGrid",""],[3,"editable","aria-description","removed","edited",4,"ngFor","ngForOf"],["placeholder","Tag your post. Maximum 5 tags. At least 1 tag!",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[3,"readonly","contentRichText","placeholder","changeInput"],[3,"editable","aria-description","removed","edited"],["matChipRemove",""]],template:function(o,e){if(1&o&&(t.TgZ(0,"div",0)(1,"form",1)(2,"div")(3,"h1"),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"div",2)(7,"div",3),t._UZ(8,"input",4),t.TgZ(9,"div",5)(10,"button",6)(11,"span",7),t._uU(12,"Save"),t.qZA(),t._UZ(13,"i",8),t.qZA(),t.TgZ(14,"ul",9)(15,"div",10)(16,"h3"),t._uU(17,"Publish your series"),t.qZA(),t.TgZ(18,"div")(19,"label",11),t._uU(20,"Visibility:"),t.qZA(),t.TgZ(21,"mat-radio-group",12)(22,"mat-radio-button",13),t._uU(23," Public "),t.qZA()(),t.TgZ(24,"p",14),t._uU(25,"\u{1f441}\ufe0f Ch\u1ec9 nh\u1eefng ng\u01b0\u1eddi c\xf3 li\xean k\u1ebft \u0111\u1ebfn series n\xe0y, m\u1edbi c\xf3 th\u1ec3 xem \u0111\u01b0\u1ee3c"),t.qZA(),t.TgZ(26,"button",15),t.NdJ("click",function(){return e.submit()}),t._uU(27,"Save"),t.qZA()()()()()(),t.YNc(28,w,2,0,"mat-error",16),t.TgZ(29,"div")(30,"div",17)(31,"mat-form-field",18)(32,"mat-chip-grid",19,20),t.YNc(34,A,5,4,"mat-chip-row",21),t.TgZ(35,"input",22),t.NdJ("matChipInputTokenEnd",function(a){return e.add(a)}),t.qZA()()(),t.YNc(36,U,2,0,"mat-error",16),t.qZA()()(),t.TgZ(37,"div")(38,"app-my-ck-editor",23),t.NdJ("changeInput",function(a){return e.onchange(a)}),t.qZA(),t.YNc(39,I,2,0,"mat-error",16),t.qZA()()()),2&o){const i=t.MAs(33);t.xp6(1),t.Q6J("formGroup",e.questionForm),t.xp6(3),t.hij(" ",t.lcZ(5,14,"CREATE_QUESTION")," "),t.xp6(4),t.Q6J("placeholder","Enter Title Text (not required)"),t.xp6(18),t.Q6J("disabled",e.questionForm.invalid||!e.contentRichText.length),t.xp6(2),t.Q6J("ngIf",e.isControlInvalid(e.questionForm,"title")),t.xp6(6),t.Q6J("ngForOf",e.tags),t.xp6(1),t.Q6J("matChipInputFor",i)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",e.addOnBlur),t.xp6(1),t.Q6J("ngIf",e.tags.length>5),t.xp6(2),t.Q6J("readonly",e.readonly)("contentRichText",e.contentRichText)("placeholder",e.placeholder),t.xp6(1),t.Q6J("ngIf",!e.contentRichText.length)}},dependencies:[u.sg,u.O5,l._Y,l.Fj,l.JJ,l.JL,Q.n,l.sg,l.u,d.RA,d.oH,d.qH,d.z3,m.KE,m.TO,T.Hw,y.Nt,Z.lW,g.VQ,g.U0,b.X$],styles:[".chip-list[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{background-color:#fff!important;border-bottom:none!important;border:1px solid #9E9E9E;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.chip-list[_ngcontent-%COMP%]     .mat-mdc-form-field-focus-overlay{background-color:#fff!important}.question-outer[_ngcontent-%COMP%]     .ck-editor__editable_inline{min-height:500px}a[_ngcontent-%COMP%]{text-decoration:none}.example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0;align-items:flex-start}.example-radio-button[_ngcontent-%COMP%]{margin:5px}.custom-counter[_ngcontent-%COMP%]{margin:0;padding:0;list-style-type:none}.custom-counter[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{counter-increment:step-counter;margin-bottom:5px}.custom-counter[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:counter(step-counter);margin-right:10px;font-size:80%;background-color:#b4b4b4;color:#fff;font-weight:700;padding:3px 6px;border-radius:50%}  .mat-mdc-text-field-wrapper{border:1px solid #ccc!important;border-radius:0!important}  .mdc-line-ripple{border:1px solid #ccc!important}.custom-button-thumbnail[_ngcontent-%COMP%]{color:var(--gray-text);border:none;padding:5px 30px;font-weight:400;cursor:pointer;transition:all .3s ease;margin-bottom:10px;background-color:transparent;border:1px solid #ccc;height:45px}.popover-posts-option[_ngcontent-%COMP%], .popover-series-option[_ngcontent-%COMP%]{width:280px}.radio-group-label[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:10px 0;align-items:flex-start}.sub-title[_ngcontent-%COMP%]{font-size:13px;font-weight:400;color:var(--gray-text);margin-bottom:5px}"]}),n})();var S=r(921),O=r(1483),F=r(8349),M=r(6956),E=r(1067),J=r(2005),P=r(3714),k=r(4559);function N(n,s){if(1&n&&(t.TgZ(0,"li")(1,"a",30),t._UZ(2,"i",31),t.TgZ(3,"span"),t._uU(4,"Edit question"),t.qZA()()()),2&n){const o=t.oxw();t.xp6(1),t.MGl("routerLink","/questions/",null==o.question?null:o.question.id,"/edit")}}function R(n,s){if(1&n){const o=t.EpF();t.TgZ(0,"li")(1,"a",32),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.deletequestion(i.question))}),t._UZ(2,"i",33),t.TgZ(3,"span"),t._uU(4,"Delete question"),t.qZA()()()}}function D(n,s){if(1&n){const o=t.EpF();t.TgZ(0,"li")(1,"a",32),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.report())}),t._UZ(2,"i",34),t.TgZ(3,"span"),t._uU(4,"Report"),t.qZA()()()}}function H(n,s){if(1&n&&(t.TgZ(0,"div",35)(1,"a",36)(2,"span"),t._uU(3),t.qZA()()()),2&n){const o=s.$implicit,e=t.oxw();t.xp6(3),t.Oqu(e.parseObject(o))}}const Y=[{path:"",component:_,children:[{path:"",redirectTo:"unanswered",pathMatch:"full"},{path:"create",component:q},{path:":id",component:(()=>{class n{constructor(o,e,i,a,p,h,G){this.activatedRoute=o,this.questionAnswerService=e,this.loadingServiceService=i,this.localStorageHelperService=a,this.modalService=p,this.notifyService=h,this.router=G,this.userLocal=this.localStorageHelperService.getUser()}ngOnInit(){this.activatedRoute.params.subscribe(o=>{this.questionId=o?.id}),this.listenService()}listenService(){this.loadingServiceService.showLoading(),this.questionAnswerService.getQuestionsById(this.questionId).subscribe(o=>{this.question=o,this.loadingServiceService.hideLoading()})}parseObject(o){return JSON.parse(o).name}isPermission(){return this.userLocal?.id===this.question?.author?.id}deletequestion(o){const e=this.modalService.open(S.z,{centered:!0,size:"md"});e.componentInstance.action="delete",e.componentInstance.title="Delete This question",e.componentInstance.content="Are you sure you want to delete this question?",e.result.then(i=>{this.questionAnswerService.deleteQuestion(o?.id).subscribe(a=>{this.router.navigate(["/home/newest/questions"]),this.notifyService.success("Delete question successfully!","Success")},a=>{console.log(a),this.notifyService.error("Delete question failed!","Error")}),history.back()}).catch(i=>{console.log(i)})}report(){this.modalService.open(O.R,{centered:!0,size:"md"}).result.then(e=>{this.notifyService.success("Thank you for your report, we will process it as soon as possible.","Success")}).catch(e=>{console.log(e)})}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(c.gz),t.Y36(x.t),t.Y36(F.H),t.Y36(M.w),t.Y36(E.FF),t.Y36(C.c),t.Y36(c.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-question-detail"]],decls:47,vars:16,consts:[[1,"mt-5","container","d-flex"],[1,"right-content-question"],[1,"title"],[1,"my-3","d-flex","justify-content-end"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"custom-button-option","d-flex","align-items-center"],[1,"fa-solid","fa-ellipsis"],[1,"dropdown-menu","popover-posts-option","pt-0"],[4,"ngIf"],[1,"tags-group"],["class","tag-name me-1",4,"ngFor","ngForOf"],[1,"mt-2","create-date"],[1,"create-date-item"],[1,"fa-solid","fa-earth-americas"],[1,"group-icon-action","d-flex","mt-1","ms-0","ms-lg-4"],[1,"icon-item","m-0"],[1,"fa-solid","fa-eye"],[1,"icon-item"],[1,"fa-solid","fa-bookmark"],[1,"fa-solid","fa-comment"],[1,"mt-2","group-content"],[3,"innerHTML"],[1,"d-flex","align-items-end"],[1,"text-uppercase","title-content","m-0","mt-2"],[1,"title-line","m-0","ms-2"],[1,"mt-5"],[3,"question"],[1,"mt-3","left-side-bar"],["id","sidebar",1,"left-side-bar-item","sticky"],[1,"mx-4"],[1,"dropdown-item","p-3","py-2",3,"routerLink"],[1,"fa-regular","fa-pen-to-square","me-2"],[1,"dropdown-item","p-3","py-2",3,"click"],[1,"fa-duotone","fa-trash","me-2"],[1,"fa-regular","fa-flag","me-2"],[1,"tag-name","me-1"],["href","#"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),t._uU(4),t.qZA()(),t.TgZ(5,"div",3)(6,"div",4)(7,"button",5),t._UZ(8,"i",6),t.qZA(),t.TgZ(9,"ul",7),t.YNc(10,N,5,1,"li",8),t.YNc(11,R,5,0,"li",8),t.YNc(12,D,5,0,"li",8),t.qZA()()(),t.TgZ(13,"div",9),t.YNc(14,H,4,1,"div",10),t.qZA(),t.TgZ(15,"div",11)(16,"div",12)(17,"p"),t._UZ(18,"i",13),t._uU(19),t.ALo(20,"date"),t.qZA(),t.TgZ(21,"div",14)(22,"div",15),t._UZ(23,"i",16),t.TgZ(24,"span"),t._uU(25),t.qZA()(),t.TgZ(26,"div",17),t._UZ(27,"i",18),t.TgZ(28,"span"),t._uU(29),t.qZA()(),t.TgZ(30,"div",17),t._UZ(31,"i",19),t.TgZ(32,"span"),t._uU(33),t.qZA()()()()(),t.TgZ(34,"div",20),t._UZ(35,"div",21),t.ALo(36,"safeHtml"),t.qZA(),t.TgZ(37,"div",22)(38,"h1",23),t._uU(39,"Answers"),t.qZA(),t._UZ(40,"hr",24),t.qZA(),t.TgZ(41,"div",25),t._UZ(42,"app-comments",26),t.qZA()(),t.TgZ(43,"div",27)(44,"div",28),t._UZ(45,"div",29)(46,"app-sidebar-ask"),t.qZA()()()),2&o&&(t.xp6(4),t.Oqu(null==e.question?null:e.question.title),t.xp6(6),t.Q6J("ngIf",e.isPermission()),t.xp6(1),t.Q6J("ngIf",e.isPermission()),t.xp6(1),t.Q6J("ngIf",!e.isPermission()),t.xp6(2),t.Q6J("ngForOf",null==e.question?null:e.question.keywords),t.xp6(5),t.hij(" Published at ",t.xi3(20,11,null==e.question?null:e.question.created,"medium")," "),t.xp6(6),t.Oqu(null==e.question?null:e.question.viewNumber),t.xp6(4),t.Oqu(null==e.question?null:e.question.commentNumber),t.xp6(4),t.Oqu(null==e.question?null:e.question.bookMarkNumber),t.xp6(2),t.Q6J("innerHTML",t.lcZ(36,14,null==e.question?null:e.question.content),t.oJD),t.xp6(7),t.Q6J("question",e.question))},dependencies:[u.sg,u.O5,c.rH,J.n,P.C,u.uU,k.z],styles:[".right-content-series .title h1{font-size:1.6rem;font-weight:500;color:var(--black)}.right-content-series .create-date p{font-size:.9rem;color:var(--gray-text);font-weight:400;margin-top:3px}.tag-name{font-size:.7rem;font-weight:500;padding:3px 10px;border-radius:5px;background:#f4f4f5;margin-top:10px;width:-moz-fit-content;width:fit-content;border:1px solid #e9e9eb}.tag-name a{color:var(--gray-text);text-decoration:none}.group-icon-action .icon-item{font-size:.8rem;color:var(--gray-text);margin-left:10px}.group-icon-action .icon-item span{margin-left:3px}.title-line{color:var(--gray-text);flex-grow:1}.left-side-bar{width:25%}.right-content-question{width:75%}.tags-group,.create-date-item{display:flex}.group-content img{width:100%!important}@media screen and (max-width: 768px){.left-side-bar{display:none}.right-content-question{width:100%}.tags-group{display:inline-flex;flex-wrap:wrap}.create-date-item{display:block}}\n"],encapsulation:2}),n})()},{path:":id/edit",component:q}]}];let z=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.Bz.forChild(Y),c.Bz]}),n})();var B=r(1581),L=r(707),j=r(9182);let K=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,z,l.u5,B.m,l.UX,b.aw,d.Hi,m.lN,T.Ps,y.c,Z.ot,L.T5,g.Fk,j.B]}),n})()}}]);