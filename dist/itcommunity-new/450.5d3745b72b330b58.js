"use strict";(self.webpackChunkITCommunity_new=self.webpackChunkITCommunity_new||[]).push([[450],{8655:(H,g,c)=>{c.r(g),c.d(g,{SearchDetailModule:()=>z});var p=c(8692),u=c(4032),l=c(92),h=c(1528),t=c(4537),v=c(3946),f=c(9730),_=c(5934),C=c(8349),x=c(3706),O=c(9549),Z=c(1901),T=c(5251),M=c(901),d=c(6707);function P(i,o){1&i&&(t.TgZ(0,"div",1)(1,"p",15),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"NO_RESULT")))}function S(i,o){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"app-card-item",16),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("item",e)}}function w(i,o){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,P,4,3,"div",13),t.YNc(2,S,2,1,"div",14),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0===(null==e.listPosts?null:e.listPosts.length)),t.xp6(1),t.Q6J("ngForOf",e.listPosts)}}function b(i,o){1&i&&(t.TgZ(0,"div",1)(1,"p",15),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"NO_RESULT")))}function A(i,o){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"app-question-card",17),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("question",e)}}function U(i,o){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,b,4,3,"div",13),t.YNc(2,A,2,1,"div",14),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0===(null==e.listQuestions?null:e.listQuestions.length)),t.xp6(1),t.Q6J("ngForOf",e.listQuestions)}}function L(i,o){1&i&&(t.TgZ(0,"div",1)(1,"p",15),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"NO_RESULT")))}function q(i,o){1&i&&(t.TgZ(0,"button",36),t._UZ(1,"i",37),t._uU(2," Follow "),t.qZA())}function y(i,o){1&i&&(t.TgZ(0,"button",38),t._UZ(1,"i",39),t._uU(2," Following "),t.qZA())}function F(i,o){if(1&i&&(t.TgZ(0,"div",20)(1,"div",21)(2,"div",22),t._UZ(3,"img",23),t.qZA(),t.TgZ(4,"div",24)(5,"p",25),t._uU(6),t.qZA(),t.TgZ(7,"p",26),t._uU(8),t.qZA(),t.YNc(9,q,3,0,"button",27),t.YNc(10,y,3,0,"button",28),t.qZA()(),t.TgZ(11,"div",29)(12,"div",30),t._UZ(13,"i",31),t.TgZ(14,"span",32),t._uU(15),t.qZA()(),t.TgZ(16,"div",30),t._UZ(17,"i",33),t.TgZ(18,"span",32),t._uU(19),t.qZA()(),t.TgZ(20,"div",30),t._UZ(21,"i",34),t.TgZ(22,"span",32),t._uU(23),t.qZA()(),t.TgZ(24,"div",30),t._UZ(25,"i",35),t.TgZ(26,"span",32),t._uU(27),t.qZA()()()()),2&i){const e=o.$implicit;t.xp6(2),t.MGl("routerLink","/profile/",null==e?null:e.username,"/posts"),t.xp6(1),t.s9C("src",null==e?null:e.avatar,t.LSH),t.xp6(2),t.MGl("routerLink","/profile/",null==e?null:e.username,"/posts"),t.xp6(1),t.hij(" ",null==e?null:e.fullname," "),t.xp6(1),t.MGl("routerLink","/profile/",null==e?null:e.username,"/posts"),t.xp6(1),t.hij(" @",null==e?null:e.username," "),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isFollowing)),t.xp6(1),t.Q6J("ngIf",null==e?null:e.isFollowing),t.xp6(5),t.Oqu(null==e?null:e.postsNumber),t.xp6(4),t.Oqu(null==e?null:e.followersNumber),t.xp6(4),t.Oqu(null==e?null:e.questionsNumber),t.xp6(4),t.Oqu(null==e?null:e.seriesNumber)}}function N(i,o){if(1&i&&(t.TgZ(0,"div")(1,"div",18),t.YNc(2,L,4,3,"div",13),t.YNc(3,F,28,12,"div",19),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",0===(null==e.listUsers?null:e.listUsers.length)),t.xp6(1),t.Q6J("ngForOf",e.listUsers)}}function D(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",53),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.followingTopic(s))}),t._UZ(1,"i",37),t._uU(2," Follow "),t.qZA()}}function Q(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.unFollowingTopic(s))}),t._UZ(1,"i",39),t._uU(2," Following "),t.qZA()}}function J(i,o){if(1&i&&(t.TgZ(0,"div",43)(1,"div",44)(2,"div",45)(3,"div",46),t._UZ(4,"img",47),t.qZA(),t.TgZ(5,"div",24)(6,"p",48),t._UZ(7,"i",49),t._uU(8),t.qZA(),t.TgZ(9,"div")(10,"div")(11,"span"),t._uU(12,"Posts:"),t.qZA(),t.TgZ(13,"span",32),t._uU(14),t.qZA()(),t.TgZ(15,"div")(16,"span"),t._uU(17,"Followers:"),t.qZA(),t.TgZ(18,"span",32),t._uU(19),t.qZA()(),t.TgZ(20,"div")(21,"span"),t._uU(22,"Answers:"),t.qZA(),t.TgZ(23,"span",32),t._uU(24),t.qZA()()()()(),t.TgZ(25,"div",50),t.YNc(26,D,3,0,"button",51),t.YNc(27,Q,3,0,"button",52),t.qZA()()()),2&i){const e=o.$implicit;t.xp6(4),t.s9C("src",e.image,t.LSH),t.xp6(4),t.hij(" ",e.name," "),t.xp6(6),t.Oqu(e.postNumber),t.xp6(5),t.Oqu(e.followersNumber),t.xp6(5),t.Oqu(e.answerNumber),t.xp6(2),t.Q6J("ngIf",!(null!=e&&e.isFollowing)),t.xp6(1),t.Q6J("ngIf",null==e?null:e.isFollowing)}}function k(i,o){if(1&i&&(t.TgZ(0,"div",40)(1,"div",41),t.YNc(2,J,28,7,"div",42),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.listTopics)}}let m=(()=>{class i{constructor(e,n,s,r,a,R,V,j,B){this.activatedRoute=e,this.postsService=n,this.questionAnswerService=s,this.userService=r,this.loadingServiceService=a,this.router=R,this.topicService=V,this.notifyService=j,this.authService=B,this.isPosts=!0,this.isQuestions=!1,this.isAuthor=!1,this.isTopics=!1,this.searchValue="",this.searchForm=this.initForm(),this.isLogin=!1}ngOnInit(){this.activatedRoute.params.subscribe(e=>{this.searchValue=e.search,this.searchForm.get("search")?.setValue(this.searchValue),this.listenSearch()}),this.setActiveMenu("posts"),this.isLogin=this.authService.checkLogin()}initForm(){return new l.cw({search:new l.NI("")})}setActiveMenu(e){const n=document.getElementById("posts"),s=document.getElementById("questions"),r=document.getElementById("author"),a=document.getElementById("topics");switch(e){case"posts":n?.classList.add("active"),s?.classList.remove("active"),r?.classList.remove("active"),a?.classList.remove("active"),this.isPosts=!0,this.isQuestions=!1,this.isAuthor=!1,this.isTopics=!1;break;case"questions":s?.classList.add("active"),n?.classList.remove("active"),r?.classList.remove("active"),a?.classList.remove("active"),this.isPosts=!1,this.isQuestions=!0,this.isAuthor=!1,this.isTopics=!1;break;case"author":r?.classList.add("active"),n?.classList.remove("active"),s?.classList.remove("active"),a?.classList.remove("active"),this.isPosts=!1,this.isQuestions=!1,this.isAuthor=!0,this.isTopics=!1;break;case"topics":a?.classList.add("active"),n?.classList.remove("active"),s?.classList.remove("active"),r?.classList.remove("active"),this.isPosts=!1,this.isQuestions=!1,this.isAuthor=!1,this.isTopics=!0;break;default:n?.classList.add("active"),s?.classList.remove("active"),r?.classList.remove("active"),a?.classList.remove("active"),this.isPosts=!0,this.isQuestions=!1,this.isAuthor=!1}}onFilterChange(e){if(this.searchValue=e.target.value,""===this.searchValue)return this.listPosts=[],this.listQuestions=[],void(this.listUsers=[])}submitSearch(){this.listenSearch(),this.router.navigate([`/search/${this.searchValue}`])}listenSearch(){this.loadingServiceService.showLoading(),this.postsService.getPosts(1,30,void 0,void 0,this.searchValue).subscribe(e=>{this.loadingServiceService.hideLoading(),this.listPosts=e.items}),this.questionAnswerService.getQuestion(1,30,void 0,void 0,this.searchValue).subscribe(e=>{this.loadingServiceService.hideLoading(),this.listQuestions=e.items}),this.userService.getAllUsers(1,30,void 0,void 0,this.searchValue).subscribe(e=>{this.loadingServiceService.hideLoading(),this.listUsers=e.items}),this.topicService.getTopic(1,30,void 0,void 0,this.searchValue).pipe((0,h.w)(e=>(e.items&&(this.listTopics=e.items),this.userService.getMe()))).subscribe(e=>{this.listTopics=this.listTopics.map(n=>(e.followTopicIds?.includes(n.id)&&(n.isFollowing=!0),n)),this.loadingServiceService.hideLoading()},e=>{console.log(e),this.loadingServiceService.hideLoading()})}followingTopic(e){if(!this.isLogin)return this.notifyService.error("Please login to follow topic!","Error"),void this.router.navigate(["/auth/login"]);this.topicService.addTopicToUser(e.id).subscribe(n=>{this.listTopics.items=this.listTopics.map(s=>(s.id===e.id&&(s.isFollowing=!0,this.notifyService.success("Follow topic successfully!","Success")),s))},n=>{this.notifyService.error("Follow topic failed!","Error")})}unFollowingTopic(e){this.topicService.removeTopicFromUser(e.id).subscribe(n=>{this.listTopics.items=this.listTopics.map(s=>(s.id===e.id&&(this.notifyService.success("UnFollow topic successfully!","Success"),s.isFollowing=!1),s))},n=>{this.notifyService.error("UnFollow topic failed!","Error")})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(u.gz),t.Y36(v.P),t.Y36(f.t),t.Y36(_.K),t.Y36(C.H),t.Y36(u.F0),t.Y36(x.r),t.Y36(O.c),t.Y36(Z.e))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-search-detail"]],decls:29,vars:23,consts:[[1,"container-fluid","container-lg"],[1,"mt-5"],[1,"w-100","d-flex","justify-content-between","align-items-center",3,"formGroup"],["type","text","formControlName","search",1,"form-control","me-3",3,"placeholder","keyup"],[1,"btn","btn-primary","btn-search",3,"click"],[1,"menu","d-flex","align-items-center","mt-3"],[1,"menu-item","me-3",3,"click"],["id","posts"],["id","questions"],["id","author"],["id","topics"],[4,"ngIf"],["class","topic-outer",4,"ngIf"],["class","mt-5",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-center","text-secondary"],[3,"item"],[3,"question"],[1,"user-list"],["class","user-card mt-4",4,"ngFor","ngForOf"],[1,"user-card","mt-4"],[1,"d-flex"],[1,"user-avatar",3,"routerLink"],["alt","",3,"src"],[1,"ms-2"],[1,"user-name","m-0",3,"routerLink"],[1,"user-username","m-0",3,"routerLink"],["class","btn-follow mt-1",4,"ngIf"],["class","btn-following",4,"ngIf"],[1,"list-icon"],[1,"icon-item"],[1,"fa-regular","fa-file-pen"],[1,"ms-1"],[1,"fa-regular","fa-users"],[1,"fa-solid","fa-messages-question"],[1,"fa-solid","fa-list"],[1,"btn-follow","mt-1"],[1,"fa-solid","fa-plus"],[1,"btn-following"],[1,"fa-solid","fa-check"],[1,"topic-outer"],[1,"card-topic-group"],["class","card-topic mt-4 p-1",4,"ngFor","ngForOf"],[1,"card-topic","mt-4","p-1"],[1,"d-flex","align-items-start","justify-content-between"],[1,"d-flex","left-card"],[1,"card-topic-img"],["width","100","height","100","alt","",3,"src"],[1,"topic-title","m-0"],[1,"rss-icon","fa","fa-rss-square","pr-05"],[1,"right-card","d-flex","justify-content-end"],["class","btn-follow me-2",3,"click",4,"ngIf"],["class","btn-following me-1",3,"click",4,"ngIf"],[1,"btn-follow","me-2",3,"click"],[1,"btn-following","me-1",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"input",3),t.NdJ("keyup",function(r){return n.onFilterChange(r)}),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return n.submitSearch()}),t._uU(6),t.ALo(7,"translate"),t.qZA()()(),t.TgZ(8,"div",5)(9,"div",6),t.NdJ("click",function(){return n.setActiveMenu("posts")}),t.TgZ(10,"p",7),t._uU(11),t.ALo(12,"translate"),t.qZA()(),t.TgZ(13,"div",6),t.NdJ("click",function(){return n.setActiveMenu("questions")}),t.TgZ(14,"p",8),t._uU(15),t.ALo(16,"translate"),t.qZA()(),t.TgZ(17,"div",6),t.NdJ("click",function(){return n.setActiveMenu("author")}),t.TgZ(18,"p",9),t._uU(19),t.ALo(20,"translate"),t.qZA()(),t.TgZ(21,"div",6),t.NdJ("click",function(){return n.setActiveMenu("topics")}),t.TgZ(22,"p",10),t._uU(23),t.ALo(24,"translate"),t.qZA()()(),t.YNc(25,w,3,2,"div",11),t.YNc(26,U,3,2,"div",11),t.YNc(27,N,4,2,"div",11),t.YNc(28,k,3,1,"div",12),t.qZA()),2&e&&(t.xp6(2),t.Q6J("formGroup",n.searchForm),t.xp6(1),t.MGl("placeholder","",t.lcZ(4,11,"SEARCH"),"..."),t.xp6(3),t.Oqu(t.lcZ(7,13,"SEARCH")),t.xp6(5),t.Oqu(t.lcZ(12,15,"POSTS")),t.xp6(4),t.Oqu(t.lcZ(16,17,"QUESTIONS")),t.xp6(4),t.Oqu(t.lcZ(20,19,"AUTHOR")),t.xp6(4),t.Oqu(t.lcZ(24,21,"TOPIC")),t.xp6(2),t.Q6J("ngIf",n.isPosts),t.xp6(1),t.Q6J("ngIf",n.isQuestions),t.xp6(1),t.Q6J("ngIf",n.isAuthor),t.xp6(1),t.Q6J("ngIf",n.isTopics))},dependencies:[p.sg,p.O5,u.rH,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,T.o,M.n,d.X$],styles:[".menu[_ngcontent-%COMP%]{border-bottom:1px solid var(--gray-light)}.menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{padding:10px 0}.menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem;font-weight:500;color:var(--gray-text);margin-bottom:0;cursor:pointer}.menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:var(--main-color)}.active[_ngcontent-%COMP%]{color:var(--main-color)!important}.title[_ngcontent-%COMP%]{display:flex}.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:500;color:var(--gray-text);margin-right:10px}.title[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{flex:1}.user-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.user-list[_ngcontent-%COMP%]   .user-card[_ngcontent-%COMP%]{width:32%;border:1px solid #e9e9eb;padding:10px;margin:5px;border-radius:5px}.user-list[_ngcontent-%COMP%]   .user-card[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;margin-right:10px;cursor:pointer}.user-list[_ngcontent-%COMP%]   .user-card[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;color:var(--black);margin-bottom:10px;cursor:pointer}.user-list[_ngcontent-%COMP%]   .user-card[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]:hover{color:var(--main-color)}.user-list[_ngcontent-%COMP%]   .user-card[_ngcontent-%COMP%]   .user-username[_ngcontent-%COMP%]{font-size:.7rem;font-weight:500;color:var(--gray-text);margin-bottom:10px;cursor:pointer}.topic-outer[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex}.topic-outer[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:500;color:var(--gray-text);margin-right:10px}.topic-outer[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{flex:1}.topic-outer[_ngcontent-%COMP%]   .card-topic-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.topic-outer[_ngcontent-%COMP%]   .card-topic-group[_ngcontent-%COMP%]   .card-topic[_ngcontent-%COMP%]{width:33%!important;margin:0 1px 0 0}.topic-outer[_ngcontent-%COMP%]   .card-topic-group[_ngcontent-%COMP%]   .card-topic[_ngcontent-%COMP%]   .topic-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:var(--black);margin-bottom:10px}.topic-outer[_ngcontent-%COMP%]   .card-topic-group[_ngcontent-%COMP%]   .card-topic[_ngcontent-%COMP%]   .topic-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fe9e40}.topic-outer[_ngcontent-%COMP%]   .left-card[_ngcontent-%COMP%]{width:70%}.topic-outer[_ngcontent-%COMP%]   .right-card[_ngcontent-%COMP%]{width:30%}.btn-follow[_ngcontent-%COMP%]{background-color:var(--main-color);color:var(--white);border:1px solid var(--main-color);border-radius:5px;padding:2px 7px;font-size:.7rem;font-weight:500;cursor:pointer}.btn-follow[_ngcontent-%COMP%]:hover{background-color:var(--white);color:var(--main-color)}.btn-following[_ngcontent-%COMP%]{background-color:var(--white);color:var(--main-color);border:1px solid var(--main-color);border-radius:5px;padding:2px 7px;font-size:.7rem;font-weight:500;cursor:pointer}.btn-following[_ngcontent-%COMP%]:hover{background-color:var(--main-color);color:var(--white)}.list-icon[_ngcontent-%COMP%]{display:inline-flex;justify-content:start;width:100%;padding-top:10px}.list-icon[_ngcontent-%COMP%]   .icon-item[_ngcontent-%COMP%]{margin-right:25px}.list-icon[_ngcontent-%COMP%]   .icon-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem;color:var(--gray-text)}.list-icon[_ngcontent-%COMP%]   .icon-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem;font-weight:500;margin-left:5px;color:var(--gray-text)}.btn-search[_ngcontent-%COMP%]{width:150px}@media screen and (max-width: 768px){.topic-outer[_ngcontent-%COMP%]   .card-topic-group[_ngcontent-%COMP%]   .card-topic[_ngcontent-%COMP%], .user-outer[_ngcontent-%COMP%]   .user-list[_ngcontent-%COMP%]   .user-card[_ngcontent-%COMP%]{width:100%!important}}"]}),i})();const I=[{path:"",component:m},{path:":search",component:m}];let Y=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[u.Bz.forChild(I),u.Bz]}),i})();var E=c(9182);let z=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[p.ez,Y,l.UX,d.aw,E.B]}),i})()}}]);