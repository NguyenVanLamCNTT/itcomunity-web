"use strict";(self.webpackChunkITCommunity_new=self.webpackChunkITCommunity_new||[]).push([[593],{8593:(w,y,a)=>{a.r(y),a.d(y,{AuthModule:()=>P});var m=a(6956),h=a(1901),Z=a(8692),t=a(92),v=a(1528),s=a(3568),e=a(4537),T=a(4910),p=a(5934),d=a(5518),l=a(9549),c=a(9638);const g=function(i){return{second:i}};let b=(()=>{class i{constructor(r,n,o,f,A,M){this.translateService=r,this.authService=n,this.localStorageHelperService=o,this.userService=f,this.router=A,this.notifyService=M,this.formOTP=this.initFormOTP(),this.secondTimeline=120}ngOnInit(){this.translateService.use(this.translateService.currentLang||"vi"),this.startTime()}startTime(){this.secondTimeline=120;const r=setInterval(()=>{this.secondTimeline>0?this.secondTimeline--:clearInterval(r)},1e3)}initFormOTP(){return new t.cw({number1:new t.NI("",[t.kI.required,t.kI.minLength(1),t.kI.maxLength(1)]),number2:new t.NI("",[t.kI.required,t.kI.minLength(1),t.kI.maxLength(1)]),number3:new t.NI("",[t.kI.required,t.kI.minLength(1),t.kI.maxLength(1)]),number4:new t.NI("",[t.kI.required,t.kI.minLength(1),t.kI.maxLength(1)]),number5:new t.NI("",[t.kI.required,t.kI.minLength(1),t.kI.maxLength(1)]),number6:new t.NI("",[t.kI.required,t.kI.minLength(1),t.kI.maxLength(1)])})}nextValue(r){switch(r){case"number1":""!==this.formOTP.getRawValue().number1&&document.getElementById("number2")?.focus();break;case"number2":""!==this.formOTP.getRawValue().number2?document.getElementById("number3")?.focus():document.getElementById("number1")?.focus();break;case"number3":""!==this.formOTP.getRawValue().number3?document.getElementById("number4")?.focus():document.getElementById("number2")?.focus();break;case"number4":""!==this.formOTP.getRawValue().number4?document.getElementById("number5")?.focus():document.getElementById("number3")?.focus();break;case"number5":""!==this.formOTP.getRawValue().number5?document.getElementById("number6")?.focus():document.getElementById("number4")?.focus();break;case"number6":""!==this.formOTP.getRawValue().number6?this.submit():document.getElementById("number5")?.focus()}}submit(){const r=this.formOTP.getRawValue().number1+this.formOTP.getRawValue().number2+this.formOTP.getRawValue().number3+this.formOTP.getRawValue().number4+this.formOTP.getRawValue().number5+this.formOTP.getRawValue().number6,n=this.localStorageHelperService.getUser();this.authService.verifyOTP(n.email,parseInt(r)).pipe((0,v.w)(o=>this.authService.login(n,!0)),(0,v.w)(o=>(this.localStorageHelperService.saveToken(o.accessToken.toString()),this.localStorageHelperService.saveRefreshToken(o.refreshToken.toString()),this.localStorageHelperService.saveIsVerify(o.isConfirmEmail),this.userService.getMe())),(0,s.K)(o=>(this.notifyService.error("Can not verify your email please try again!","Error"),this.formOTP.reset(),document.getElementById("number1")?.focus(),o))).subscribe(o=>{this.localStorageHelperService.addUser(o),this.router.navigate(["/home/newest/posts"])})}resendOTP(){this.startTime()}}return i.\u0275fac=function(r){return new(r||i)(e.Y36(T.sK),e.Y36(h.e),e.Y36(m.w),e.Y36(p.K),e.Y36(d.F0),e.Y36(l.c))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-validate-email"]],decls:25,vars:18,consts:[[1,"p-5","container-lg"],[1,"p-5","text-center"],[1,"d-flex","justify-content-center","mt-4"],["src","assets/images/logo-header-250x250.png","alt","","width","200"],[1,"text-secondary","mx-5","my-4"],[1,"d-flex","justify-content-center","mt-4",3,"formGroup"],["type","text","name","","id","number1","maxlength","1","formControlName","number1",1,"input-otp-item",3,"keyup"],["type","text","name","","id","number2","maxlength","1","formControlName","number2",1,"input-otp-item",3,"keyup"],["type","text","name","","id","number3","maxlength","1","formControlName","number3",1,"input-otp-item",3,"keyup"],["type","text","name","","id","number4","maxlength","1","formControlName","number4",1,"input-otp-item",3,"keyup"],["type","text","name","","id","number5","maxlength","1","formControlName","number5",1,"input-otp-item",3,"keyup"],["type","text","name","","id","number6","maxlength","1","formControlName","number6",1,"input-otp-item",3,"keyup"],[1,"mt-3"],[1,"my-2"],["mat-raised-button","","color","primary",3,"click"]],template:function(r,n){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"h1"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"p",4),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"form",5)(11,"input",6),e.NdJ("keyup",function(){return n.nextValue("number1")}),e.qZA(),e.TgZ(12,"input",7),e.NdJ("keyup",function(){return n.nextValue("number2")}),e.qZA(),e.TgZ(13,"input",8),e.NdJ("keyup",function(){return n.nextValue("number3")}),e.qZA(),e.TgZ(14,"input",9),e.NdJ("keyup",function(){return n.nextValue("number4")}),e.qZA(),e.TgZ(15,"input",10),e.NdJ("keyup",function(){return n.nextValue("number5")}),e.qZA(),e.TgZ(16,"input",11),e.NdJ("keyup",function(){return n.nextValue("number6")}),e.qZA()(),e.TgZ(17,"div",12)(18,"i"),e._uU(19),e.ALo(20,"translate"),e.qZA()(),e.TgZ(21,"div",13)(22,"button",14),e.NdJ("click",function(){return n.resendOTP()}),e._uU(23),e.ALo(24,"translate"),e.qZA()()()()),2&r&&(e.xp6(5),e.Oqu(e.lcZ(6,7,"WELCOME")),e.xp6(3),e.hij(" ",e.lcZ(9,9,"VALIDATE_EMAIL_SUB_HEADER")," "),e.xp6(2),e.Q6J("formGroup",n.formOTP),e.xp6(8),e.ekj("text-danger",0===n.secondTimeline),e.xp6(1),e.hij(" ( ",e.xi3(20,11,"TIME_VERIFY_OTP",e.VKq(16,g,n.secondTimeline))," ) "),e.xp6(4),e.Oqu(e.lcZ(24,14,"RESEND_OTP")))},dependencies:[t._Y,t.Fj,t.JJ,t.JL,t.nD,t.sg,t.u,c.lW,T.X$],styles:[".input-otp-item[_ngcontent-%COMP%]{width:40px;height:50px;border:1px solid #000000;border-radius:5px;text-align:center;font-size:20px;font-weight:600;color:#000;margin:0 5px;padding:0;outline:none;-webkit-appearance:none;appearance:none}"]}),i})();var k=a(4882),E=a(5725),I=a(4945);const C=function(){return["/auth/login"]};let _=(()=>{class i{constructor(r,n,o,f){this.authService=r,this.router=n,this.localStorageHelperService=o,this.notifyService=f,this.infoRegister=this.initFormRegister()}ngOnInit(){}initFormRegister(){return new t.cw({username:new t.NI("",[t.kI.required]),password:new t.NI("",[t.kI.required]),email:new t.NI("",[t.kI.required,t.kI.email]),age:new t.NI("",[t.kI.required]),gender:new t.NI("",[t.kI.required]),fullname:new t.NI("",[t.kI.required])})}register(){const r=new E.n;r.username=this.infoRegister.value.username,r.password=this.infoRegister.value.password,r.email=this.infoRegister.value.email,r.age=this.infoRegister.value.age,r.gender=this.infoRegister.value.gender,r.fullname=this.infoRegister.value.fullname,this.authService.register(r).pipe((0,k.z)(n=>(r&&this.localStorageHelperService.addUser(r),this.authService.sendOTP(r.username))),(0,s.K)(n=>(this.notifyService.error("Register failed please try again!","Error"),(0,I.of)(n)))).subscribe(n=>{this.router.navigate(["/auth/validate-email"])})}isControlValid(r,n){const o=r.controls[n];return o.valid&&(o.dirty||o.touched)}isControlInvalid(r,n){const o=r.controls[n];return o.invalid&&(o.dirty||o.touched)}controlHasError(r,n,o){const f=r.controls[o];return f.hasError(n)&&(f.dirty||f.touched)}isControlTouched(r,n){const o=r.controls[n];return o.dirty||o.touched}}return i.\u0275fac=function(r){return new(r||i)(e.Y36(h.e),e.Y36(d.F0),e.Y36(m.w),e.Y36(l.c))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-register"]],decls:70,vars:27,consts:[[1,"p-5","bg-image",2,"background-image","url('https://mdbootstrap.com/img/new/textures/full/171.jpg')","height","300px"],[1,"card","mx-4","mx-md-5","shadow-5-strong",2,"margin-top","-160px","background","hsla(0, 0%, 100%, 0.8)","backdrop-filter","blur(30px)"],[1,"card-body","py-5","px-md-5"],[1,"row","d-flex","justify-content-center"],[1,"col-lg-6"],[1,"d-flex","justify-content-center"],["src","../../../../assets/images/logo-header-250x250.png","width","100","alt",""],[1,"text-center"],[1,"fw-bold","mb-5"],[3,"formGroup"],[1,"row"],[1,"col-md-6","mb-4"],[1,"form-outline"],["for","username",1,"form-label"],["type","text","id","username","formControlName","username",1,"form-control","is-invalid"],["for","fullname",1,"form-label"],["type","text","id","fullname","formControlName","fullname",1,"form-control","is-invalid"],["for","gender",1,"form-label"],["name","gender","id","gender","formControlName","gender",1,"form-control","is-invalid"],["value","MALE"],["value","FEMALE"],["value","OTHER"],["type","text","id","fullname","formControlName","age",1,"form-control","is-invalid"],[1,"form-outline","mb-4"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control","is-invalid"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control","is-invalid"],[1,"form-check","d-flex","justify-content-between","mb-4"],["for","form2Example33",1,"form-check-label"],["type","checkbox","value","","id","form2Example33","checked","",1,"form-check-input"],[3,"routerLink"],["type","submit",1,"btn","btn-primary","btn-block","mb-4","w-50",3,"click"],["type","button",1,"btn","btn-link","btn-floating","mx-1"],[1,"fab","fa-facebook-f"],[1,"fab","fa-google"],[1,"fab","fa-twitter"],[1,"fab","fa-github"]],template:function(r,n){1&r&&(e.TgZ(0,"section"),e._UZ(1,"div",0),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e._UZ(7,"img",6),e.qZA(),e.TgZ(8,"div",7)(9,"h2",8),e._uU(10,"\u0110\u0103ng k\xed t\xe0i kho\u1ea3n cho ITCommunity"),e.qZA()(),e.TgZ(11,"form",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"label",13),e._uU(16,"Username"),e.qZA(),e._UZ(17,"input",14),e.qZA()(),e.TgZ(18,"div",11)(19,"div",12)(20,"label",15),e._uU(21,"Fullname"),e.qZA(),e._UZ(22,"input",16),e.qZA()()(),e.TgZ(23,"div",10)(24,"div",11)(25,"div",12)(26,"label",17),e._uU(27,"Gender"),e.qZA(),e.TgZ(28,"select",18)(29,"option",19),e._uU(30,"Male"),e.qZA(),e.TgZ(31,"option",20),e._uU(32,"Female"),e.qZA(),e.TgZ(33,"option",21),e._uU(34,"Other"),e.qZA()()()(),e.TgZ(35,"div",11)(36,"div",12)(37,"label",15),e._uU(38,"Age"),e.qZA(),e._UZ(39,"input",22),e.qZA()()(),e.TgZ(40,"div",23)(41,"label",24),e._uU(42,"Email address"),e.qZA(),e._UZ(43,"input",25),e.qZA(),e.TgZ(44,"div",23)(45,"label",26),e._uU(46,"Password"),e.qZA(),e._UZ(47,"input",27),e.qZA(),e.TgZ(48,"div",28)(49,"div")(50,"label",29),e._uU(51," Subscribe to our newsletter "),e.qZA(),e._UZ(52,"input",30),e.qZA(),e.TgZ(53,"div")(54,"a",31),e._uU(55,"\u0110\u0103ng nh\u1eadp"),e.qZA()()(),e.TgZ(56,"div",5)(57,"button",32),e.NdJ("click",function(){return n.register()}),e._uU(58," Sign up "),e.qZA()(),e.TgZ(59,"div",7)(60,"p"),e._uU(61,"or sign up with:"),e.qZA(),e.TgZ(62,"button",33),e._UZ(63,"i",34),e.qZA(),e.TgZ(64,"button",33),e._UZ(65,"i",35),e.qZA(),e.TgZ(66,"button",33),e._UZ(67,"i",36),e.qZA(),e.TgZ(68,"button",33),e._UZ(69,"i",37),e.qZA()()()()()()()()),2&r&&(e.xp6(11),e.Q6J("formGroup",n.infoRegister),e.xp6(6),e.ekj("is-invalid",n.isControlInvalid(n.infoRegister,"username"))("is-valid",n.isControlValid(n.infoRegister,"username")),e.xp6(5),e.ekj("is-invalid",n.isControlInvalid(n.infoRegister,"fullname"))("is-valid",n.isControlValid(n.infoRegister,"fullname")),e.xp6(6),e.ekj("is-invalid",n.isControlInvalid(n.infoRegister,"gender"))("is-valid",n.isControlValid(n.infoRegister,"gender")),e.xp6(11),e.ekj("is-invalid",n.isControlInvalid(n.infoRegister,"age"))("is-valid",n.isControlValid(n.infoRegister,"age")),e.xp6(4),e.ekj("is-invalid",n.isControlInvalid(n.infoRegister,"email"))("is-valid",n.isControlValid(n.infoRegister,"email")),e.xp6(4),e.ekj("is-invalid",n.isControlInvalid(n.infoRegister,"email"))("is-valid",n.isControlValid(n.infoRegister,"email")),e.xp6(7),e.Q6J("routerLink",e.DdM(26,C)))},dependencies:[d.rH,t._Y,t.YN,t.Kr,t.Fj,t.EJ,t.JJ,t.JL,t.sg,t.u]}),i})(),S=(()=>{class i{constructor(r){this.translateService=r}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)(e.Y36(T.sK))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-auth"]],decls:1,vars:0,template:function(r,n){1&r&&e._UZ(0,"router-outlet")},dependencies:[d.lC]}),i})();var U=a(7741),R=a(8168);const x=function(){return["/auth/register"]},L=[{path:"",component:S,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class i{constructor(r,n,o,f,A){this.authService=r,this.router=n,this.localStorageHelperService=o,this.userService=f,this.notifyService=A,this.infoLogin=this.initFormLogin()}ngOnInit(){}initFormLogin(){return new t.cw({username:new t.NI("",[t.kI.required]),password:new t.NI("",[t.kI.required])})}onSubmit(){const r={username:this.infoLogin.value.username,password:this.infoLogin.value.password},n=new U.W;this.authService.login(r,!1).pipe((0,R.b)(o=>{this.localStorageHelperService.saveToken(o.accessToken.toString()),this.localStorageHelperService.saveRefreshToken(o.refreshToken.toString()),this.localStorageHelperService.saveIsVerify(o.isConfirmEmail),n.accessToken=o.accessToken,n.refreshToken=o.refreshToken,n.isConfirmEmail=o.isConfirmEmail,n.isConfirmEmail=o.isConfirmEmail,n.isAdmin=o.isAdmin}),(0,v.w)(()=>this.userService.getMe()),(0,v.w)(o=>(o.password=r.password,this.localStorageHelperService.addUser(o),this.authService.isLogin(!0),n&&n.isConfirmEmail?(this.router.navigate(["/home/newest/posts"]),(0,I.of)(null)):(this.router.navigate(["/auth/validate-email"]),this.authService.sendOTP(o.username)))),(0,s.K)(o=>(this.notifyService.error("Login failed please field again!"),(0,I.of)(null)))).subscribe(o=>{})}}return i.\u0275fac=function(r){return new(r||i)(e.Y36(h.e),e.Y36(d.F0),e.Y36(m.w),e.Y36(p.K),e.Y36(l.c))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-login"]],decls:37,vars:3,consts:[[1,"vh-100",2,"background-color","#508bfc"],[3,"formGroup"],[1,"container","py-5","h-100"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-12","col-md-8","col-lg-6","col-xl-5"],[1,"card","shadow-2-strong",2,"border-radius","1rem"],[1,"card-body","p-5"],[1,"d-flex","justify-content-center"],["src","../../../../assets/images/logo-header-250x250.png","width","100","alt",""],[1,"text-center","mt-2"],[1,"mb-5"],[1,"form-outline","mb-4"],["for","typeEmailX-2",1,"form-label"],["type","email","id","typeEmailX-2","formControlName","username",1,"form-control","form-control-lg"],["for","typePasswordX-2",1,"form-label"],["type","password","id","typePasswordX-2","formControlName","password",1,"form-control","form-control-lg"],[1,"form-check","d-flex","justify-content-between","mb-4"],["type","checkbox","value","","id","form1Example3",1,"form-check-input"],["for","form1Example3",1,"form-check-label","ms-2"],[1,"ms-auto","text-main",3,"routerLink"],["type","submit",1,"btn","btn-primary","btn-lg","btn-block","w-100",3,"click"],[1,"my-4"],["type","submit",1,"btn","btn-lg","btn-block","btn-primary","w-100",2,"background-color","#dd4b39"],[1,"fab","fa-google","me-2"],["type","submit",1,"btn","btn-lg","btn-block","btn-primary","mb-2","w-100","mt-3",2,"background-color","#3b5998"],[1,"fab","fa-facebook-f","me-2"]],template:function(r,n){1&r&&(e.TgZ(0,"section",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e._UZ(8,"img",8),e.qZA(),e.TgZ(9,"div",9)(10,"h3",10),e._uU(11,"\u0110\u0103ng nh\u1eadp v\xe0o ITCommunity"),e.qZA()(),e.TgZ(12,"div",11)(13,"label",12),e._uU(14,"Email"),e.qZA(),e._UZ(15,"input",13),e.qZA(),e.TgZ(16,"div",11)(17,"label",14),e._uU(18,"Password"),e.qZA(),e._UZ(19,"input",15),e.qZA(),e.TgZ(20,"div",16)(21,"div"),e._UZ(22,"input",17),e.TgZ(23,"label",18),e._uU(24," Remember password "),e.qZA()(),e.TgZ(25,"div")(26,"a",19),e._uU(27,"T\u1ea1o t\xe0i kho\u1ea3n"),e.qZA()()(),e.TgZ(28,"button",20),e.NdJ("click",function(){return n.onSubmit()}),e._uU(29,"Login"),e.qZA(),e._UZ(30,"hr",21),e.TgZ(31,"button",22),e._UZ(32,"i",23),e._uU(33," Sign in with google"),e.qZA(),e.TgZ(34,"button",24),e._UZ(35,"i",25),e._uU(36,"Sign in with facebook"),e.qZA()()()()()()()()),2&r&&(e.xp6(1),e.Q6J("formGroup",n.infoLogin),e.xp6(25),e.Q6J("routerLink",e.DdM(2,x)))},dependencies:[d.rH,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u],styles:[".gradient-custom-2[_ngcontent-%COMP%]{background:#fccb90;background:linear-gradient(to right,#ee7724,#d8363a,#dd3675,#b44593)}@media (min-width: 768px){.gradient-form[_ngcontent-%COMP%]{height:100vh!important}}@media (min-width: 769px){.gradient-custom-2[_ngcontent-%COMP%]{border-top-right-radius:.3rem;border-bottom-right-radius:.3rem}}.text-main[_ngcontent-%COMP%]{color:var(--main-colors)!important}"]}),i})()},{path:"register",component:_},{path:"validate-email",component:b}]}];let O=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.Bz.forChild(L),d.Bz]}),i})(),P=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[h.e,m.w],imports:[Z.ez,O,t.UX,T.aw,c.ot]}),i})()},9549:(w,y,a)=>{a.d(y,{c:()=>Z});var m=a(4537),h=a(8292);let Z=(()=>{class t{constructor(s){this.toastr=s}success(s,e="Successfully"){this.toastr.success(s,e)}error(s,e="Error"){this.toastr.error(s,e)}warning(s,e="Warning"){this.toastr.warning(s,e)}info(s,e="Info"){this.toastr.info(s,e)}}return t.\u0275fac=function(s){return new(s||t)(m.LFG(h._W))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},5934:(w,y,a)=>{a.d(y,{K:()=>T});var m=a(7969),h=a(2340),Z=a(9413),t=a(4537),v=a(2389);const s=h.N.apiUrl,e=Z.H.user;let T=(()=>{class p{constructor(l){this.apiService=l}getAllUsers(l,c,g,b){return this.apiService.get(`${s}/${e.allUser}?page=${l}&perPage=${c}`+(b?`&username=${b}`:"")).pipe((0,m.U)(E=>E.body.data||{}))}getMe(){return this.apiService.get(`${s}/${e.getMe}`).pipe((0,m.U)(c=>c.body.data||{}))}updateMe(l){return this.apiService.put(`${s}/${e.getMe}`,l).pipe((0,m.U)(g=>g.body.data||{}))}getByUsername(l){return this.apiService.get(`${s}/${e.byUsername}?username=${l}`).pipe((0,m.U)(g=>g.body.data||{}))}followingMember(l,c){return this.apiService.post(`${s}/${e.follow}`,{authorId:l,follow:c}).pipe((0,m.U)(k=>k.body||{}))}}return p.\u0275fac=function(l){return new(l||p)(t.LFG(v.s))},p.\u0275prov=t.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()}}]);